<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Canvas Test</title>
</head>
<body>
    <h1>Simple Canvas Positioning Test</h1>
    <canvas id="test-canvas" width="400" height="300" style="border: 1px solid black;"></canvas>

    <script>
        // Simple test to verify canvas positioning works
        const canvas = document.getElementById('test-canvas');
        const ctx = canvas.getContext('2d');

        // Draw a test pattern
        function drawTestPattern() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw a reference grid
            ctx.strokeStyle = 'rgba(0, 0, 255, 0.3)';
            ctx.lineWidth = 1;

            for (let i = 0; i <= 400; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, 300);
                ctx.stroke();
            }

            for (let i = 0; i <= 300; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(400, i);
                ctx.stroke();
            }

            // Draw a reference square
            ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';
            ctx.fillRect(100, 100, 50, 50);

            // Draw text
            ctx.fillStyle = 'black';
            ctx.font = '12px Arial';
            ctx.fillText('Reference Square', 100, 95);
        }

        drawTestPattern();

        // Function to capture canvas snapshot for drift testing
        window.captureCanvasSnapshot = function() {
            const points = [];
            const sampleSize = 20;

            for (let x = 0; x < sampleSize; x++) {
                for (let y = 0; y < sampleSize; y++) {
                    const pixelX = Math.floor((canvas.width * x) / sampleSize);
                    const pixelY = Math.floor((canvas.height * y) / sampleSize);
                    const imageData = ctx.getImageData(pixelX, pixelY, 1, 1);
                    const pixel = imageData.data;
                    points.push({
                        x: pixelX,
                        y: pixelY,
                        r: pixel[0],
                        g: pixel[1],
                        b: pixel[2],
                        a: pixel[3]
                    });
                }
            }

            return {
                canvasWidth: canvas.width,
                canvasHeight: canvas.height,
                points: points
            };
        };

        window.canvasTestReady = true;
        console.log('Simple canvas test ready');
    </script>
</body>
</html>