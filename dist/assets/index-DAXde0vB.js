var ha=Object.defineProperty;var da=(t,e,n)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kr=(t,e,n)=>da(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function tt(){}function ws(t){return t()}function Al(){return Object.create(null)}function rt(t){t.forEach(ws)}function ks(t){return typeof t=="function"}function Fn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pa(t){return Object.keys(t).length===0}function Ss(t,...e){if(t==null){for(const i of e)i(void 0);return tt}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function At(t){let e;return Ss(t,n=>e=n)(),e}function Pe(t,e,n){t.$$.on_destroy.push(Ss(e,n))}function c(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function ga(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function O(t){return document.createTextNode(t)}function b(){return O(" ")}function Hr(){return O("")}function k(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function K(t){return t===""?null:+t}function _a(t){return Array.from(t.childNodes)}function X(t,e){e=""+e,t.data!==e&&(t.data=e)}function R(t,e){t.value=e??""}function gi(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function wt(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function tn(t){const e=t.querySelector(":checked");return e&&e.__value}function ma(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Mn;function Sn(t){Mn=t}function Lr(){if(!Mn)throw new Error("Function called outside component initialization");return Mn}function Ms(t){Lr().$$.on_mount.push(t)}function va(t){Lr().$$.after_update.push(t)}function ya(){const t=Lr();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=ma(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const rn=[],zr=[];let sn=[];const Rl=[],ba=Promise.resolve();let Fr=!1;function wa(){Fr||(Fr=!0,ba.then(Cs))}function Xt(t){sn.push(t)}const Sr=new Set;let en=0;function Cs(){if(en!==0)return;const t=Mn;do{try{for(;en<rn.length;){const e=rn[en];en++,Sn(e),ka(e.$$)}}catch(e){throw rn.length=0,en=0,e}for(Sn(null),rn.length=0,en=0;zr.length;)zr.pop()();for(let e=0;e<sn.length;e+=1){const n=sn[e];Sr.has(n)||(Sr.add(n),n())}sn.length=0}while(rn.length);for(;Rl.length;)Rl.pop()();Fr=!1,Sr.clear(),Sn(t)}function ka(t){if(t.fragment!==null){t.update(),rt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xt)}}function Sa(t){const e=[],n=[];sn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),sn=e}const bi=new Set;let Me;function Ur(){Me={r:0,c:[],p:Me}}function Vr(){Me.r||rt(Me.c),Me=Me.p}function Nt(t,e){t&&t.i&&(bi.delete(t),t.i(e))}function Vt(t,e,n,i){if(t&&t.o){if(bi.has(t))return;bi.add(t),Me.c.push(()=>{bi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function on(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ma(t,e){t.d(1),e.delete(t.key)}function Ca(t,e){Vt(t,1,1,()=>{e.delete(t.key)})}function Ps(t,e,n,i,r,o,s,l,a,u,g,h){let d=t.length,m=o.length,v=d;const y={};for(;v--;)y[t[v].key]=v;const z=[],W=new Map,I=new Map,D=[];for(v=m;v--;){const x=h(r,o,v),B=n(x);let _=s.get(B);_?D.push(()=>_.p(x,e)):(_=u(B,x),_.c()),W.set(B,z[v]=_),B in y&&I.set(B,Math.abs(v-y[B]))}const A=new Set,M=new Set;function E(x){Nt(x,1),x.m(l,g),s.set(x.key,x),g=x.first,m--}for(;d&&m;){const x=z[m-1],B=t[d-1],_=x.key,w=B.key;x===B?(g=x.first,d--,m--):W.has(w)?!s.has(_)||A.has(_)?E(x):M.has(w)?d--:I.get(_)>I.get(w)?(M.add(_),E(x)):(A.add(w),d--):(a(B,s),d--)}for(;d--;){const x=t[d];W.has(x.key)||a(x,s)}for(;m;)E(z[m-1]);return rt(D),z}function qr(t){t&&t.c()}function Oi(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Xt(()=>{const o=t.$$.on_mount.map(ws).filter(ks);t.$$.on_destroy?t.$$.on_destroy.push(...o):rt(o),t.$$.on_mount=[]}),r.forEach(Xt)}function Wi(t,e){const n=t.$$;n.fragment!==null&&(Sa(n.after_update),rt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pa(t,e){t.$$.dirty[0]===-1&&(rn.push(t),wa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Bi(t,e,n,i,r,o,s=null,l=[-1]){const a=Mn;Sn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:tt,not_equal:r,bound:Al(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Al(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let g=!1;if(u.ctx=n?n(t,e.props||{},(h,d,...m)=>{const v=m.length?m[0]:d;return u.ctx&&r(u.ctx[h],u.ctx[h]=v)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](v),g&&Pa(t,h)),d}):[],u.update(),g=!0,rt(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const h=_a(e.target);u.fragment&&u.fragment.l(h),h.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&Nt(t.$$.fragment),Oi(t,e.target,e.anchor),Cs()}Sn(a)}class Ii{constructor(){kr(this,"$$");kr(this,"$$set")}$destroy(){Wi(this,1),this.$destroy=tt}$on(e,n){if(!ks(n))return tt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!pa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const za="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(za);const nn=[];function ge(t,e=tt){let n;const i=new Set;function r(l){if(Fn(t,l)&&(t=l,n)){const a=!nn.length;for(const u of i)u[1](),nn.push(u,t);if(a){for(let u=0;u<nn.length;u+=2)nn[u][0](nn[u+1]);nn.length=0}}}function o(l){r(l(t))}function s(l,a=tt){const u=[l,a];return i.add(u),i.size===1&&(n=e(r,o)||tt),l(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function wi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fa(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zs(t){let e,n,i;t.length!==2?(e=wi,n=(l,a)=>wi(t(l),a),i=(l,a)=>t(l)-a):(e=t===wi||t===Fa?t:xa,n=t,i=t);function r(l,a,u=0,g=l.length){if(u<g){if(e(a,a)!==0)return g;do{const h=u+g>>>1;n(l[h],a)<0?u=h+1:g=h}while(u<g)}return u}function o(l,a,u=0,g=l.length){if(u<g){if(e(a,a)!==0)return g;do{const h=u+g>>>1;n(l[h],a)<=0?u=h+1:g=h}while(u<g)}return u}function s(l,a,u=0,g=l.length){const h=r(l,a,u,g-1);return h>u&&i(l[h-1],a)>-i(l[h],a)?h-1:h}return{left:r,center:s,right:o}}function xa(){return 0}function Ta(t){return t===null?NaN:+t}const Na=zs(wi),Aa=Na.right;zs(Ta).center;const Ra=Math.sqrt(50),Da=Math.sqrt(10),Ea=Math.sqrt(2);function Ci(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=Ra?10:o>=Da?5:o>=Ea?2:1;let l,a,u;return r<0?(u=Math.pow(10,-r)/s,l=Math.round(t*u),a=Math.round(e*u),l/u<t&&++l,a/u>e&&--a,u=-u):(u=Math.pow(10,r)*s,l=Math.round(t/u),a=Math.round(e/u),l*u<t&&++l,a*u>e&&--a),a<l&&.5<=n&&n<2?Ci(t,e,n*2):[l,a,u]}function Oa(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,s]=i?Ci(e,t,n):Ci(t,e,n);if(!(o>=r))return[];const l=o-r+1,a=new Array(l);if(i)if(s<0)for(let u=0;u<l;++u)a[u]=(o-u)/-s;else for(let u=0;u<l;++u)a[u]=(o-u)*s;else if(s<0)for(let u=0;u<l;++u)a[u]=(r+u)/-s;else for(let u=0;u<l;++u)a[u]=(r+u)*s;return a}function xr(t,e,n){return e=+e,t=+t,n=+n,Ci(t,e,n)[2]}function Wa(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?xr(e,t,n):xr(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}var Ba={value:()=>{}};function Fs(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ki(n)}function ki(t){this._=t}function Ia(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ki.prototype=Fs.prototype={constructor:ki,on:function(t,e){var n=this._,i=Ia(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=$a(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Dl(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Dl(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ki(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function $a(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Dl(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Ba,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Tr="http://www.w3.org/1999/xhtml";const El={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $i(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),El.hasOwnProperty(e)?{space:El[e],local:t}:t}function ja(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tr&&e.documentElement.namespaceURI===Tr?e.createElement(t):e.createElementNS(n,t)}}function Ha(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xs(t){var e=$i(t);return(e.local?Ha:ja)(e)}function La(){}function Xr(t){return t==null?La:function(){return this.querySelector(t)}}function Ua(t){typeof t!="function"&&(t=Xr(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=new Array(s),a,u,g=0;g<s;++g)(a=o[g])&&(u=t.call(a,a.__data__,g,o))&&("__data__"in a&&(u.__data__=a.__data__),l[g]=u);return new Rt(i,this._parents)}function Va(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qa(){return[]}function Ts(t){return t==null?qa:function(){return this.querySelectorAll(t)}}function Xa(t){return function(){return Va(t.apply(this,arguments))}}function Ya(t){typeof t=="function"?t=Xa(t):t=Ts(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new Rt(i,r)}function Ns(t){return function(){return this.matches(t)}}function As(t){return function(e){return e.matches(t)}}var Ga=Array.prototype.find;function Ka(t){return function(){return Ga.call(this.children,t)}}function Ja(){return this.firstElementChild}function Za(t){return this.select(t==null?Ja:Ka(typeof t=="function"?t:As(t)))}var Qa=Array.prototype.filter;function tu(){return Array.from(this.children)}function eu(t){return function(){return Qa.call(this.children,t)}}function nu(t){return this.selectAll(t==null?tu:eu(typeof t=="function"?t:As(t)))}function iu(t){typeof t!="function"&&(t=Ns(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Rt(i,this._parents)}function Rs(t){return new Array(t.length)}function ru(){return new Rt(this._enter||this._groups.map(Rs),this._parents)}function Pi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pi.prototype={constructor:Pi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ou(t){return function(){return t}}function lu(t,e,n,i,r,o){for(var s=0,l,a=e.length,u=o.length;s<u;++s)(l=e[s])?(l.__data__=o[s],i[s]=l):n[s]=new Pi(t,o[s]);for(;s<a;++s)(l=e[s])&&(r[s]=l)}function su(t,e,n,i,r,o,s){var l,a,u=new Map,g=e.length,h=o.length,d=new Array(g),m;for(l=0;l<g;++l)(a=e[l])&&(d[l]=m=s.call(a,a.__data__,l,e)+"",u.has(m)?r[l]=a:u.set(m,a));for(l=0;l<h;++l)m=s.call(t,o[l],l,o)+"",(a=u.get(m))?(i[l]=a,a.__data__=o[l],u.delete(m)):n[l]=new Pi(t,o[l]);for(l=0;l<g;++l)(a=e[l])&&u.get(d[l])===a&&(r[l]=a)}function au(t){return t.__data__}function uu(t,e){if(!arguments.length)return Array.from(this,au);var n=e?su:lu,i=this._parents,r=this._groups;typeof t!="function"&&(t=ou(t));for(var o=r.length,s=new Array(o),l=new Array(o),a=new Array(o),u=0;u<o;++u){var g=i[u],h=r[u],d=h.length,m=cu(t.call(g,g&&g.__data__,u,i)),v=m.length,y=l[u]=new Array(v),z=s[u]=new Array(v),W=a[u]=new Array(d);n(g,h,y,z,W,m,e);for(var I=0,D=0,A,M;I<v;++I)if(A=y[I]){for(I>=D&&(D=I+1);!(M=z[D])&&++D<v;);A._next=M||null}}return s=new Rt(s,i),s._enter=l,s._exit=a,s}function cu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fu(){return new Rt(this._exit||this._groups.map(Rs),this._parents)}function hu(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function du(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),l=new Array(r),a=0;a<s;++a)for(var u=n[a],g=i[a],h=u.length,d=l[a]=new Array(h),m,v=0;v<h;++v)(m=u[v]||g[v])&&(d[v]=m);for(;a<r;++a)l[a]=n[a];return new Rt(l,this._parents)}function pu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function gu(t){t||(t=_u);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],l=s.length,a=r[o]=new Array(l),u,g=0;g<l;++g)(u=s[g])&&(a[g]=u);a.sort(e)}return new Rt(r,this._parents).order()}function _u(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function mu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vu(){return Array.from(this)}function yu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function bu(){let t=0;for(const e of this)++t;return t}function wu(){return!this.node()}function ku(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,l;o<s;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function Su(t){return function(){this.removeAttribute(t)}}function Mu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cu(t,e){return function(){this.setAttribute(t,e)}}function Pu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Fu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xu(t,e){var n=$i(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Mu:Su:typeof e=="function"?n.local?Fu:zu:n.local?Pu:Cu)(n,e))}function Ds(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tu(t){return function(){this.style.removeProperty(t)}}function Nu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Au(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ru(t,e,n){return arguments.length>1?this.each((e==null?Tu:typeof e=="function"?Au:Nu)(t,e,n??"")):cn(this.node(),t)}function cn(t,e){return t.style.getPropertyValue(e)||Ds(t).getComputedStyle(t,null).getPropertyValue(e)}function Du(t){return function(){delete this[t]}}function Eu(t,e){return function(){this[t]=e}}function Ou(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Wu(t,e){return arguments.length>1?this.each((e==null?Du:typeof e=="function"?Ou:Eu)(t,e)):this.node()[t]}function Es(t){return t.trim().split(/^|\s+/)}function Yr(t){return t.classList||new Os(t)}function Os(t){this._node=t,this._names=Es(t.getAttribute("class")||"")}Os.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ws(t,e){for(var n=Yr(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Bs(t,e){for(var n=Yr(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Bu(t){return function(){Ws(this,t)}}function Iu(t){return function(){Bs(this,t)}}function $u(t,e){return function(){(e.apply(this,arguments)?Ws:Bs)(this,t)}}function ju(t,e){var n=Es(t+"");if(arguments.length<2){for(var i=Yr(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?$u:e?Bu:Iu)(n,e))}function Hu(){this.textContent=""}function Lu(t){return function(){this.textContent=t}}function Uu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Vu(t){return arguments.length?this.each(t==null?Hu:(typeof t=="function"?Uu:Lu)(t)):this.node().textContent}function qu(){this.innerHTML=""}function Xu(t){return function(){this.innerHTML=t}}function Yu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Gu(t){return arguments.length?this.each(t==null?qu:(typeof t=="function"?Yu:Xu)(t)):this.node().innerHTML}function Ku(){this.nextSibling&&this.parentNode.appendChild(this)}function Ju(){return this.each(Ku)}function Zu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qu(){return this.each(Zu)}function tc(t){var e=typeof t=="function"?t:xs(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ec(){return null}function nc(t,e){var n=typeof t=="function"?t:xs(t),i=e==null?ec:typeof e=="function"?e:Xr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function ic(){var t=this.parentNode;t&&t.removeChild(this)}function rc(){return this.each(ic)}function oc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sc(t){return this.select(t?lc:oc)}function ac(t){return arguments.length?this.property("__data__",t):this.node().__data__}function uc(t){return function(e){t.call(this,e,this.__data__)}}function cc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function fc(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function hc(t,e,n){return function(){var i=this.__on,r,o=uc(e);if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function dc(t,e,n){var i=cc(t+""),r,o=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,g;a<u;++a)for(r=0,g=l[a];r<o;++r)if((s=i[r]).type===g.type&&s.name===g.name)return g.value}return}for(l=e?hc:fc,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function Is(t,e,n){var i=Ds(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function pc(t,e){return function(){return Is(this,t,e)}}function gc(t,e){return function(){return Is(this,t,e.apply(this,arguments))}}function _c(t,e){return this.each((typeof e=="function"?gc:pc)(t,e))}function*mc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var vc=[null];function Rt(t,e){this._groups=t,this._parents=e}function xn(){return new Rt([[document.documentElement]],vc)}function yc(){return this}Rt.prototype=xn.prototype={constructor:Rt,select:Ua,selectAll:Ya,selectChild:Za,selectChildren:nu,filter:iu,data:uu,enter:ru,exit:fu,join:hu,merge:du,selection:yc,order:pu,sort:gu,call:mu,nodes:vu,node:yu,size:bu,empty:wu,each:ku,attr:xu,style:Ru,property:Wu,classed:ju,text:Vu,html:Gu,raise:Ju,lower:Qu,append:tc,insert:nc,remove:rc,clone:sc,datum:ac,on:dc,dispatch:_c,[Symbol.iterator]:mc};function Gr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $s(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Tn(){}var Cn=.7,zi=1/Cn,an="\\s*([+-]?\\d+)\\s*",Pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bc=/^#([0-9a-f]{3,8})$/,wc=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),kc=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),Sc=new RegExp(`^rgba\\(${an},${an},${an},${Pn}\\)$`),Mc=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Pn}\\)$`),Cc=new RegExp(`^hsl\\(${Pn},${Wt},${Wt}\\)$`),Pc=new RegExp(`^hsla\\(${Pn},${Wt},${Wt},${Pn}\\)$`),Ol={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gr(Tn,Fe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wl,formatHex:Wl,formatHex8:zc,formatHsl:Fc,formatRgb:Bl,toString:Bl});function Wl(){return this.rgb().formatHex()}function zc(){return this.rgb().formatHex8()}function Fc(){return js(this).formatHsl()}function Bl(){return this.rgb().formatRgb()}function Fe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Il(e):n===3?new ht(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_i(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_i(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wc.exec(t))?new ht(e[1],e[2],e[3],1):(e=kc.exec(t))?new ht(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Sc.exec(t))?_i(e[1],e[2],e[3],e[4]):(e=Mc.exec(t))?_i(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cc.exec(t))?Hl(e[1],e[2]/100,e[3]/100,1):(e=Pc.exec(t))?Hl(e[1],e[2]/100,e[3]/100,e[4]):Ol.hasOwnProperty(t)?Il(Ol[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function Il(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function _i(t,e,n,i){return i<=0&&(t=e=n=NaN),new ht(t,e,n,i)}function xc(t){return t instanceof Tn||(t=Fe(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function Nr(t,e,n,i){return arguments.length===1?xc(t):new ht(t,e,n,i??1)}function ht(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Gr(ht,Nr,$s(Tn,{brighter(t){return t=t==null?zi:Math.pow(zi,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cn:Math.pow(Cn,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(ze(this.r),ze(this.g),ze(this.b),Fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$l,formatHex:$l,formatHex8:Tc,formatRgb:jl,toString:jl}));function $l(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}`}function Tc(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}${Ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function jl(){const t=Fi(this.opacity);return`${t===1?"rgb(":"rgba("}${ze(this.r)}, ${ze(this.g)}, ${ze(this.b)}${t===1?")":`, ${t})`}`}function Fi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ze(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ce(t){return t=ze(t),(t<16?"0":"")+t.toString(16)}function Hl(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tt(t,e,n,i)}function js(t){if(t instanceof Tt)return new Tt(t.h,t.s,t.l,t.opacity);if(t instanceof Tn||(t=Fe(t)),!t)return new Tt;if(t instanceof Tt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-r,a=(o+r)/2;return l?(e===o?s=(n-i)/l+(n<i)*6:n===o?s=(i-e)/l+2:s=(e-n)/l+4,l/=a<.5?o+r:2-o-r,s*=60):l=a>0&&a<1?0:s,new Tt(s,l,a,t.opacity)}function Nc(t,e,n,i){return arguments.length===1?js(t):new Tt(t,e,n,i??1)}function Tt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Gr(Tt,Nc,$s(Tn,{brighter(t){return t=t==null?zi:Math.pow(zi,t),new Tt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cn:Math.pow(Cn,t),new Tt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ht(Mr(t>=240?t-240:t+120,r,i),Mr(t,r,i),Mr(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Tt(Ll(this.h),mi(this.s),mi(this.l),Fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fi(this.opacity);return`${t===1?"hsl(":"hsla("}${Ll(this.h)}, ${mi(this.s)*100}%, ${mi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ll(t){return t=(t||0)%360,t<0?t+360:t}function mi(t){return Math.max(0,Math.min(1,t||0))}function Mr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kr=t=>()=>t;function Ac(t,e){return function(n){return t+n*e}}function Rc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Dc(t){return(t=+t)==1?Hs:function(e,n){return n-e?Rc(e,n,t):Kr(isNaN(e)?n:e)}}function Hs(t,e){var n=e-t;return n?Ac(t,n):Kr(isNaN(t)?e:t)}const xi=function t(e){var n=Dc(e);function i(r,o){var s=n((r=Nr(r)).r,(o=Nr(o)).r),l=n(r.g,o.g),a=n(r.b,o.b),u=Hs(r.opacity,o.opacity);return function(g){return r.r=s(g),r.g=l(g),r.b=a(g),r.opacity=u(g),r+""}}return i.gamma=t,i}(1);function Ec(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Oc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wc(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=Jr(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<i;++s)o[s]=r[s](l);return o}}function Bc(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function xt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ic(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Jr(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Ar=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cr=new RegExp(Ar.source,"g");function $c(t){return function(){return t}}function jc(t){return function(e){return t(e)+""}}function Ls(t,e){var n=Ar.lastIndex=Cr.lastIndex=0,i,r,o,s=-1,l=[],a=[];for(t=t+"",e=e+"";(i=Ar.exec(t))&&(r=Cr.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,a.push({i:s,x:xt(i,r)})),n=Cr.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?a[0]?jc(a[0].x):$c(e):(e=a.length,function(u){for(var g=0,h;g<e;++g)l[(h=a[g]).i]=h.x(u);return l.join("")})}function Jr(t,e){var n=typeof e,i;return e==null||n==="boolean"?Kr(e):(n==="number"?xt:n==="string"?(i=Fe(e))?(e=i,xi):Ls:e instanceof Fe?xi:e instanceof Date?Bc:Oc(e)?Ec:Array.isArray(e)?Wc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ic:xt)(t,e)}function Hc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ul=180/Math.PI,Rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Us(t,e,n,i,r,o){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Ul,skewX:Math.atan(a)*Ul,scaleX:s,scaleY:l}}var vi;function Lc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Rr:Us(e.a,e.b,e.c,e.d,e.e,e.f)}function Uc(t){return t==null||(vi||(vi=document.createElementNS("http://www.w3.org/2000/svg","g")),vi.setAttribute("transform",t),!(t=vi.transform.baseVal.consolidate()))?Rr:(t=t.matrix,Us(t.a,t.b,t.c,t.d,t.e,t.f))}function Vs(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,g,h,d,m,v){if(u!==h||g!==d){var y=m.push("translate(",null,e,null,n);v.push({i:y-4,x:xt(u,h)},{i:y-2,x:xt(g,d)})}else(h||d)&&m.push("translate("+h+e+d+n)}function s(u,g,h,d){u!==g?(u-g>180?g+=360:g-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:xt(u,g)})):g&&h.push(r(h)+"rotate("+g+i)}function l(u,g,h,d){u!==g?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:xt(u,g)}):g&&h.push(r(h)+"skewX("+g+i)}function a(u,g,h,d,m,v){if(u!==h||g!==d){var y=m.push(r(m)+"scale(",null,",",null,")");v.push({i:y-4,x:xt(u,h)},{i:y-2,x:xt(g,d)})}else(h!==1||d!==1)&&m.push(r(m)+"scale("+h+","+d+")")}return function(u,g){var h=[],d=[];return u=t(u),g=t(g),o(u.translateX,u.translateY,g.translateX,g.translateY,h,d),s(u.rotate,g.rotate,h,d),l(u.skewX,g.skewX,h,d),a(u.scaleX,u.scaleY,g.scaleX,g.scaleY,h,d),u=g=null,function(m){for(var v=-1,y=d.length,z;++v<y;)h[(z=d[v]).i]=z.x(m);return h.join("")}}}var Vc=Vs(Lc,"px, ","px)","deg)"),qc=Vs(Uc,", ",")",")"),fn=0,bn=0,yn=0,qs=1e3,Ti,wn,Ni=0,xe=0,ji=0,zn=typeof performance=="object"&&performance.now?performance:Date,Xs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zr(){return xe||(Xs(Xc),xe=zn.now()+ji)}function Xc(){xe=0}function Ai(){this._call=this._time=this._next=null}Ai.prototype=Ys.prototype={constructor:Ai,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zr():+n)+(e==null?0:+e),!this._next&&wn!==this&&(wn?wn._next=this:Ti=this,wn=this),this._call=t,this._time=n,Dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dr())}};function Ys(t,e,n){var i=new Ai;return i.restart(t,e,n),i}function Yc(){Zr(),++fn;for(var t=Ti,e;t;)(e=xe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--fn}function Vl(){xe=(Ni=zn.now())+ji,fn=bn=0;try{Yc()}finally{fn=0,Kc(),xe=0}}function Gc(){var t=zn.now(),e=t-Ni;e>qs&&(ji-=e,Ni=t)}function Kc(){for(var t,e=Ti,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ti=n);wn=t,Dr(i)}function Dr(t){if(!fn){bn&&(bn=clearTimeout(bn));var e=t-xe;e>24?(t<1/0&&(bn=setTimeout(Vl,t-zn.now()-ji)),yn&&(yn=clearInterval(yn))):(yn||(Ni=zn.now(),yn=setInterval(Gc,qs)),fn=1,Xs(Vl))}}function ql(t,e,n){var i=new Ai;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Jc=Fs("start","end","cancel","interrupt"),Zc=[],Gs=0,Xl=1,Er=2,Si=3,Yl=4,Or=5,Mi=6;function Hi(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Qc(t,n,{name:e,index:i,group:r,on:Jc,tween:Zc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Gs})}function Qr(t,e){var n=Dt(t,e);if(n.state>Gs)throw new Error("too late; already scheduled");return n}function It(t,e){var n=Dt(t,e);if(n.state>Si)throw new Error("too late; already running");return n}function Dt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qc(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Ys(o,0,n.time);function o(u){n.state=Xl,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var g,h,d,m;if(n.state!==Xl)return a();for(g in i)if(m=i[g],m.name===n.name){if(m.state===Si)return ql(s);m.state===Yl?(m.state=Mi,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete i[g]):+g<e&&(m.state=Mi,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete i[g])}if(ql(function(){n.state===Si&&(n.state=Yl,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Er,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Er){for(n.state=Si,r=new Array(d=n.tween.length),g=0,h=-1;g<d;++g)(m=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=m);r.length=h+1}}function l(u){for(var g=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Or,1),h=-1,d=r.length;++h<d;)r[h].call(t,g);n.state===Or&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Mi,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function tf(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Er&&i.state<Or,i.state=Mi,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function ef(t){return this.each(function(){tf(this,t)})}function nf(t,e){var n,i;return function(){var r=It(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function rf(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=It(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var l={name:e,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===e){r[a]=l;break}a===u&&r.push(l)}o.tween=r}}function of(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Dt(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?nf:rf)(n,t,e))}function to(t,e,n){var i=t._id;return t.each(function(){var r=It(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Dt(r,i).value[e]}}function Ks(t,e){var n;return(typeof e=="number"?xt:e instanceof Fe?xi:(n=Fe(e))?(e=n,xi):Ls)(t,e)}function lf(t){return function(){this.removeAttribute(t)}}function sf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function af(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function uf(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function cf(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+"",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function ff(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+"",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function hf(t,e){var n=$i(t),i=n==="transform"?qc:Ks;return this.attrTween(t,typeof e=="function"?(n.local?ff:cf)(n,i,to(this,"attr."+t,e)):e==null?(n.local?sf:lf)(n):(n.local?uf:af)(n,i,e))}function df(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function pf(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function gf(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&pf(t,o)),n}return r._value=e,r}function _f(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&df(t,o)),n}return r._value=e,r}function mf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=$i(t);return this.tween(n,(i.local?gf:_f)(i,e))}function vf(t,e){return function(){Qr(this,t).delay=+e.apply(this,arguments)}}function yf(t,e){return e=+e,function(){Qr(this,t).delay=e}}function bf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vf:yf)(e,t)):Dt(this.node(),e).delay}function wf(t,e){return function(){It(this,t).duration=+e.apply(this,arguments)}}function kf(t,e){return e=+e,function(){It(this,t).duration=e}}function Sf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?wf:kf)(e,t)):Dt(this.node(),e).duration}function Mf(t,e){if(typeof e!="function")throw new Error;return function(){It(this,t).ease=e}}function Cf(t){var e=this._id;return arguments.length?this.each(Mf(e,t)):Dt(this.node(),e).ease}function Pf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;It(this,t).ease=n}}function zf(t){if(typeof t!="function")throw new Error;return this.each(Pf(this._id,t))}function Ff(t){typeof t!="function"&&(t=Ns(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Yt(i,this._parents,this._name,this._id)}function xf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),l=0;l<o;++l)for(var a=e[l],u=n[l],g=a.length,h=s[l]=new Array(g),d,m=0;m<g;++m)(d=a[m]||u[m])&&(h[m]=d);for(;l<i;++l)s[l]=e[l];return new Yt(s,this._parents,this._name,this._id)}function Tf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nf(t,e,n){var i,r,o=Tf(e)?Qr:It;return function(){var s=o(this,t),l=s.on;l!==i&&(r=(i=l).copy()).on(e,n),s.on=r}}function Af(t,e){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(t):this.each(Nf(n,t,e))}function Rf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Df(){return this.on("end.remove",Rf(this._id))}function Ef(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xr(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var l=i[s],a=l.length,u=o[s]=new Array(a),g,h,d=0;d<a;++d)(g=l[d])&&(h=t.call(g,g.__data__,d,l))&&("__data__"in g&&(h.__data__=g.__data__),u[d]=h,Hi(u[d],e,n,d,u,Dt(g,n)));return new Yt(o,this._parents,e,n)}function Of(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ts(t));for(var i=this._groups,r=i.length,o=[],s=[],l=0;l<r;++l)for(var a=i[l],u=a.length,g,h=0;h<u;++h)if(g=a[h]){for(var d=t.call(g,g.__data__,h,a),m,v=Dt(g,n),y=0,z=d.length;y<z;++y)(m=d[y])&&Hi(m,e,n,y,d,v);o.push(d),s.push(g)}return new Yt(o,s,e,n)}var Wf=xn.prototype.constructor;function Bf(){return new Wf(this._groups,this._parents)}function If(t,e){var n,i,r;return function(){var o=cn(this,t),s=(this.style.removeProperty(t),cn(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function Js(t){return function(){this.style.removeProperty(t)}}function $f(t,e,n){var i,r=n+"",o;return function(){var s=cn(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function jf(t,e,n){var i,r,o;return function(){var s=cn(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),cn(this,t))),s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l))}}function Hf(t,e){var n,i,r,o="style."+e,s="end."+o,l;return function(){var a=It(this,t),u=a.on,g=a.value[o]==null?l||(l=Js(e)):void 0;(u!==n||r!==g)&&(i=(n=u).copy()).on(s,r=g),a.on=i}}function Lf(t,e,n){var i=(t+="")=="transform"?Vc:Ks;return e==null?this.styleTween(t,If(t,i)).on("end.style."+t,Js(t)):typeof e=="function"?this.styleTween(t,jf(t,i,to(this,"style."+t,e))).each(Hf(this._id,t)):this.styleTween(t,$f(t,i,e),n).on("end.style."+t,null)}function Uf(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Vf(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Uf(t,s,n)),i}return o._value=e,o}function qf(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Vf(t,e,n??""))}function Xf(t){return function(){this.textContent=t}}function Yf(t){return function(){var e=t(this);this.textContent=e??""}}function Gf(t){return this.tween("text",typeof t=="function"?Yf(to(this,"text",t)):Xf(t==null?"":t+""))}function Kf(t){return function(e){this.textContent=t.call(this,e)}}function Jf(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Kf(r)),e}return i._value=t,i}function Zf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Jf(t))}function Qf(){for(var t=this._name,e=this._id,n=Zs(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var g=Dt(a,e);Hi(a,t,n,u,s,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Yt(i,this._parents,t,n)}function th(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var l={value:s},a={value:function(){--r===0&&o()}};n.each(function(){var u=It(this,i),g=u.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),u.on=e}),r===0&&o()})}var eh=0;function Yt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Zs(){return++eh}var Ut=xn.prototype;Yt.prototype={constructor:Yt,select:Ef,selectAll:Of,selectChild:Ut.selectChild,selectChildren:Ut.selectChildren,filter:Ff,merge:xf,selection:Bf,transition:Qf,call:Ut.call,nodes:Ut.nodes,node:Ut.node,size:Ut.size,empty:Ut.empty,each:Ut.each,on:Af,attr:hf,attrTween:mf,style:Lf,styleTween:qf,text:Gf,textTween:Zf,remove:Df,tween:of,delay:bf,duration:Sf,ease:Cf,easeVarying:zf,end:th,[Symbol.iterator]:Ut[Symbol.iterator]};function nh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ih={time:null,delay:0,duration:250,ease:nh};function rh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function oh(t){var e,n;t instanceof Yt?(e=t._id,t=t._name):(e=Zs(),(n=ih).time=Zr(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&Hi(a,t,e,u,s,n||rh(a,e));return new Yt(i,this._parents,t,e)}xn.prototype.interrupt=ef;xn.prototype.transition=oh;const Wr=Math.PI,Br=2*Wr,ke=1e-6,lh=Br-ke;function Qs(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function sh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Qs;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class ah{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Qs:sh(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,s){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,a=i-e,u=r-n,g=s-e,h=l-n,d=g*g+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>ke)if(!(Math.abs(h*a-u*g)>ke)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let m=i-s,v=r-l,y=a*a+u*u,z=m*m+v*v,W=Math.sqrt(y),I=Math.sqrt(d),D=o*Math.tan((Wr-Math.acos((y+d-z)/(2*W*I)))/2),A=D/I,M=D/W;Math.abs(A-1)>ke&&this._append`L${e+A*g},${n+A*h}`,this._append`A${o},${o},0,0,${+(h*m>g*v)},${this._x1=e+M*a},${this._y1=n+M*u}`}}arc(e,n,i,r,o,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),a=i*Math.sin(r),u=e+l,g=n+a,h=1^s,d=s?r-o:o-r;this._x1===null?this._append`M${u},${g}`:(Math.abs(this._x1-u)>ke||Math.abs(this._y1-g)>ke)&&this._append`L${u},${g}`,i&&(d<0&&(d=d%Br+Br),d>lh?this._append`A${i},${i},0,1,${h},${e-l},${n-a}A${i},${i},0,1,${h},${this._x1=u},${this._y1=g}`:d>ke&&this._append`A${i},${i},0,${+(d>=Wr)},${h},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function uh(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ri(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function hn(t){return t=Ri(Math.abs(t)),t?t[1]:NaN}function ch(t,e){return function(n,i){for(var r=n.length,o=[],s=0,l=t[0],a=0;r>0&&l>0&&(a+l+1>i&&(l=Math.max(1,i-a)),o.push(n.substring(r-=l,r+l)),!((a+=l+1)>i));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function fh(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Di(t){if(!(e=hh.exec(t)))throw new Error("invalid format: "+t);var e;return new eo({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Di.prototype=eo.prototype;function eo(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dh(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var ta;function ph(t,e){var n=Ri(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(ta=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ri(t,Math.max(0,e+o-1))[0]}function Gl(t,e){var n=Ri(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Kl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uh,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Gl(t*100,e),r:Gl,s:ph,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Jl(t){return t}var Zl=Array.prototype.map,Ql=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gh(t){var e=t.grouping===void 0||t.thousands===void 0?Jl:ch(Zl.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Jl:fh(Zl.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",a=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Di(h);var d=h.fill,m=h.align,v=h.sign,y=h.symbol,z=h.zero,W=h.width,I=h.comma,D=h.precision,A=h.trim,M=h.type;M==="n"?(I=!0,M="g"):Kl[M]||(D===void 0&&(D=12),A=!0,M="g"),(z||d==="0"&&m==="=")&&(z=!0,d="0",m="=");var E=y==="$"?n:y==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=y==="$"?i:/[%p]/.test(M)?s:"",B=Kl[M],_=/[defgprs%]/.test(M);D=D===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function w(S){var T=E,H=x,L,U,q;if(M==="c")H=B(S)+H,S="";else{S=+S;var V=S<0||1/S<0;if(S=isNaN(S)?a:B(Math.abs(S),D),A&&(S=dh(S)),V&&+S==0&&v!=="+"&&(V=!1),T=(V?v==="("?v:l:v==="-"||v==="("?"":v)+T,H=(M==="s"?Ql[8+ta/3]:"")+H+(V&&v==="("?")":""),_){for(L=-1,U=S.length;++L<U;)if(q=S.charCodeAt(L),48>q||q>57){H=(q===46?r+S.slice(L+1):S.slice(L))+H,S=S.slice(0,L);break}}}I&&!z&&(S=e(S,1/0));var $=T.length+S.length+H.length,j=$<W?new Array(W-$+1).join(d):"";switch(I&&z&&(S=e(j+S,j.length?W-H.length:1/0),j=""),m){case"<":S=T+S+H+j;break;case"=":S=T+j+S+H;break;case"^":S=j.slice(0,$=j.length>>1)+T+S+H+j.slice($);break;default:S=j+T+S+H;break}return o(S)}return w.toString=function(){return h+""},w}function g(h,d){var m=u((h=Di(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(hn(d)/3)))*3,y=Math.pow(10,-v),z=Ql[8+v/3];return function(W){return m(y*W)+z}}return{format:u,formatPrefix:g}}var yi,ea,na;_h({thousands:",",grouping:[3],currency:["$",""]});function _h(t){return yi=gh(t),ea=yi.format,na=yi.formatPrefix,yi}function mh(t){return Math.max(0,-hn(Math.abs(t)))}function vh(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hn(e)/3)))*3-hn(Math.abs(t)))}function yh(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hn(e)-hn(t))+1}function bh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wh(t){return function(){return t}}function kh(t){return+t}var ts=[0,1];function ln(t){return t}function Ir(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wh(isNaN(e)?NaN:.5)}function Sh(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Mh(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=Ir(r,i),o=n(s,o)):(i=Ir(i,r),o=n(o,s)),function(l){return o(i(l))}}function Ch(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=Ir(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var a=Aa(t,l,1,i)-1;return o[a](r[a](l))}}function Ph(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zh(){var t=ts,e=ts,n=Jr,i,r,o,s=ln,l,a,u;function g(){var d=Math.min(t.length,e.length);return s!==ln&&(s=Sh(t[0],t[d-1])),l=d>2?Ch:Mh,a=u=null,h}function h(d){return d==null||isNaN(d=+d)?o:(a||(a=l(t.map(i),e,n)))(i(s(d)))}return h.invert=function(d){return s(r((u||(u=l(e,t.map(i),xt)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,kh),g()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),g()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=Hc,g()},h.clamp=function(d){return arguments.length?(s=d?!0:ln,g()):s!==ln},h.interpolate=function(d){return arguments.length?(n=d,g()):n},h.unknown=function(d){return arguments.length?(o=d,h):o},function(d,m){return i=d,r=m,g()}}function Fh(){return zh()(ln,ln)}function xh(t,e,n,i){var r=Wa(t,e,n),o;switch(i=Di(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=vh(r,s))&&(i.precision=o),na(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=yh(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=mh(r))&&(i.precision=o-(i.type==="%")*2);break}}return ea(i)}function Th(t){var e=t.domain;return t.ticks=function(n){var i=e();return Oa(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return xh(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,s=i[r],l=i[o],a,u,g=10;for(l<s&&(u=s,s=l,l=u,u=r,r=o,o=u);g-- >0;){if(u=xr(s,l,n),u===a)return i[r]=s,i[o]=l,e(i);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;a=u}return t},t}function $r(){var t=Fh();return t.copy=function(){return Ph(t,$r())},bh.apply(t,arguments),Th(t)}function nt(t){return function(){return t}}function ia(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new ah(e)}function ra(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oa(t){this._context=t}oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function la(t){return new oa(t)}function sa(t){return t[0]}function aa(t){return t[1]}function Nh(t,e){var n=nt(!0),i=null,r=la,o=null,s=ia(l);t=typeof t=="function"?t:t===void 0?sa:nt(t),e=typeof e=="function"?e:e===void 0?aa:nt(e);function l(a){var u,g=(a=ra(a)).length,h,d=!1,m;for(i==null&&(o=r(m=s())),u=0;u<=g;++u)!(u<g&&n(h=a[u],u,a))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(h,u,a),+e(h,u,a));if(m)return o=null,m+""||null}return l.x=function(a){return arguments.length?(t=typeof a=="function"?a:nt(+a),l):t},l.y=function(a){return arguments.length?(e=typeof a=="function"?a:nt(+a),l):e},l.defined=function(a){return arguments.length?(n=typeof a=="function"?a:nt(!!a),l):n},l.curve=function(a){return arguments.length?(r=a,i!=null&&(o=r(i)),l):r},l.context=function(a){return arguments.length?(a==null?i=o=null:o=r(i=a),l):i},l}function Ah(t,e,n){var i=null,r=nt(!0),o=null,s=la,l=null,a=ia(u);t=typeof t=="function"?t:t===void 0?sa:nt(+t),e=typeof e=="function"?e:nt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?aa:nt(+n);function u(h){var d,m,v,y=(h=ra(h)).length,z,W=!1,I,D=new Array(y),A=new Array(y);for(o==null&&(l=s(I=a())),d=0;d<=y;++d){if(!(d<y&&r(z=h[d],d,h))===W)if(W=!W)m=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=d-1;v>=m;--v)l.point(D[v],A[v]);l.lineEnd(),l.areaEnd()}W&&(D[d]=+t(z,d,h),A[d]=+e(z,d,h),l.point(i?+i(z,d,h):D[d],n?+n(z,d,h):A[d]))}if(I)return l=null,I+""||null}function g(){return Nh().defined(r).curve(s).context(o)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:nt(+h),i=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:nt(+h),u):t},u.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:nt(+h),u):i},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:nt(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:nt(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:nt(+h),u):n},u.lineX0=u.lineY0=function(){return g().x(t).y(e)},u.lineY1=function(){return g().x(t).y(n)},u.lineX1=function(){return g().x(i).y(e)},u.defined=function(h){return arguments.length?(r=typeof h=="function"?h:nt(!!h),u):r},u.curve=function(h){return arguments.length?(s=h,o!=null&&(l=s(o)),u):s},u.context=function(h){return arguments.length?(h==null?o=l=null:l=s(o=h),u):o},u}function es(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ua(t){this._context=t}ua.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:es(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:es(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rh(t){return new ua(t)}function kn(t,e,n){this.k=t,this.x=e,this.y=n}kn.prototype={constructor:kn,scale:function(t){return t===1?this:new kn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};kn.prototype;const{subscribe:Dh,set:Eh,update:Nn}=ge({}),Gt=new Map,Ei={visualizationsContentWidth:220,meterHeight:120,centralAxisXPosition:170,adrRange:100,adrProximityThreshold:10,priceFontSize:50,priceFontWeight:"600",priceHorizontalOffset:14,priceDisplayPadding:4,bigFigureFontSizeRatio:1.2,pipFontSizeRatio:1.1,pipetteFontSizeRatio:.8,priceUseStaticColor:!1,priceStaticColor:"#d1d5db",priceUpColor:"#3b82f6",priceDownColor:"#ef4444",showPriceBoundingBox:!1,showPriceBackground:!1,showPipetteDigit:!1,priceFloatWidth:50,priceFloatHeight:1,priceFloatXOffset:20,showVolatilityOrb:!0,volatilityColorMode:"intensity",volatilityOrbBaseWidth:70,volatilityOrbInvertBrightness:!1,volatilitySizeMultiplier:.5,showFlash:!1,flashThreshold:2,flashIntensity:.3,showOrbFlash:!1,orbFlashThreshold:2,orbFlashIntensity:.8,showMarketProfile:!0,marketProfileView:"bars",distributionDepthMode:"all",distributionPercentage:50,priceBucketSize:.5,showSingleSidedProfile:!1,singleSidedProfileSide:"right",showMaxMarker:!0};function Oh(t,e){const n=typeof e=="number"&&!isNaN(e)?e:0;n!==e&&console.warn(`Invalid initialPrice '${e}' for ${t}. Defaulting to 0.`),Nn(i=>{if(i[t])return i;console.log(`Creating new symbol: ${t} with initial price: ${n}`);const r=new Worker(new URL("/assets/dataProcessor-CxWmMfm8.js",import.meta.url),{type:"module"}),o={currentPrice:n,midPrice:n,lastTickTime:0,maxDeflection:{up:0,down:0,lastUpdateTime:0},volatility:0,lastTickDirection:"up",marketProfile:{levels:[]},adrHigh:0,adrLow:0,flashEffect:null};return r.onmessage=({data:s})=>Wh(t,s),r.postMessage({type:"init",payload:{config:Ei,midPrice:n}}),Gt.set(t,r),i[t]={config:{...Ei},state:o,marketProfile:{levels:[]}},i})}function Wh(t,e){const{type:n,payload:i}=e;n==="stateUpdate"&&Nn(r=>{const o=r[t];if(o){const s={...o,state:{...o.state,...i.newState},marketProfile:i.marketProfile,flashEffect:i.flashEffect?{...i.flashEffect,id:performance.now()}:null};return{...r,[t]:s}}return r})}function Bh(t,e){const n=Gt.get(t);n?n.postMessage({type:"tick",payload:e}):console.warn(`Ignoring tick for uninitialized symbol: ${t}`)}function Ih(t,e){const n=Gt.get(t);n&&n.postMessage({type:"initialProfile",payload:e})}function $h(t,e){Nn(n=>{if(n[t]){n[t].config={...n[t].config,...e};const i=Gt.get(t);i&&i.postMessage({type:"updateConfig",payload:e})}return n})}function jh(t){Nn(e=>{if(e[t]){e[t].config={...Ei};const n=Gt.get(t);n&&n.postMessage({type:"updateConfig",payload:{...Ei}})}return e})}function Hh(t){Nn(e=>{if(e[t]){const n=Gt.get(t);n&&(n.terminate(),Gt.delete(t)),delete e[t]}return e})}function Lh(){Eh({}),Gt.forEach(t=>t.terminate()),Gt.clear()}const dt={subscribe:Dh,createNewSymbol:Oh,dispatchTick:Bh,dispatchMarketProfile:Ih,updateConfig:$h,resetConfig:jh,removeSymbol:Hh,clear:Lh},Bt=ge("disconnected"),qt=ge("simulated"),An=ge([]),Te=ge(new Set),Rn=ge({});let J=null,un,gt={};const ns={calm:{baseInterval:2e3,randomness:1500,magnitudeMultiplier:.5},normal:{baseInterval:800,randomness:1e3,magnitudeMultiplier:1},active:{baseInterval:300,randomness:400,magnitudeMultiplier:1.5},volatile:{baseInterval:100,randomness:200,magnitudeMultiplier:2.5}},Uh=()=>{const t=window.location.protocol==="https:"?"wss:":"ws:",e=window.location.hostname,i=`${t}//${e}/ws`;return console.log(`Attempting to connect to WebSocket at: ${i}`),i};let Vh=Uh();function no(){if(!(J&&(J.readyState===WebSocket.OPEN||J.readyState===WebSocket.CONNECTING))){io(),Bt.set("ws-connecting");try{J=new WebSocket(Vh),J.onopen=()=>J.send(JSON.stringify({type:"connect"})),J.onmessage=t=>{const e=JSON.parse(t.data);switch(e.type){case"status":qh(e);break;case"symbolDataPackage":Xh(e);break;case"tick":dt.dispatchTick(e.symbol,{...e,bid:parseFloat(e.bid),ask:parseFloat(e.ask)});break;case"subscribeResponse":case"unsubscribeResponse":Gh(e);break;case"error":Pr(e.message);break;default:console.warn("Received unknown message type:",e.type)}},J.onclose=()=>{J=null,At(Bt)!=="error"&&Bt.set("disconnected"),An.set([])},J.onerror=t=>{console.error("WebSocket Error:",t),Pr("WebSocket connection failed."),J&&J.close()}}catch(t){console.error("Failed to create WebSocket:",t),Pr("Failed to create WebSocket."),J=null}}}function qh(t){if(Bt.set(t.status),An.set(t.availableSymbols||[]),t.status==="connected"){const e=Array.from(At(Te));e.length>0&&(console.log("Live data reconnected, resubscribing to:",e),ca(e))}t.message&&console.log("Backend status message:",t.message)}function Xh(t){const e=(t.prevDayHigh+t.prevDayLow)/2;dt.createNewSymbol(t.symbol,e),Rn.update(n=>(n[t.symbol]={adr:t.adr,prevDayHigh:t.prevDayHigh,prevDayLow:t.prevDayLow},n)),t.initialMarketProfile&&dt.dispatchMarketProfile(t.symbol,t.initialMarketProfile),Te.update(n=>n.add(t.symbol))}function Pr(t){console.error("Backend Error:",t),Bt.set("error"),An.set([])}function Li(){io(),J&&(J.onclose=null,J.close()),J=null,Bt.set("disconnected"),An.set([]),Te.set(new Set),dt.clear()}function jr(){Li();const t="SIM-EURUSD",e=1.255;dt.createNewSymbol(t,e),Rn.set({[t]:{adr:.0085,prevDayHigh:e+.00425,prevDayLow:e-.00425}}),Te.set(new Set([t])),gt={currentPrice:e,momentum:0};function n(){var d;if(At(qt)!=="simulated"){un=null;return}const i=(d=At(dt)[t])==null?void 0:d.config;if(!i){un=setTimeout(n,100);return}const r=ns[i.frequencyMode]||ns.normal;gt.momentum=(gt.momentum||0)*.85;const o=gt.momentum*.2,l=Math.random()-.5+o;let a=l>0?1:l<0?-1:0;a===0&&gt.momentum!==0&&(a=gt.momentum>0?1:-1),gt.momentum=Math.max(-1,Math.min(1,gt.momentum+a*(Math.random()*.3+.1)));let u=Math.random()<.8?Math.random()*.8:Math.random()<.98?.8+Math.random()*2:3+Math.random()*5;u*=r.magnitudeMultiplier,gt.currentPrice+=a*u/1e5,gt.currentPrice=Math.max(1e-5,gt.currentPrice);const g={type:"tick",symbol:t,bid:gt.currentPrice,ask:gt.currentPrice+Math.random()*.2/1e4,timestamp:performance.now(),volume:1e6+Math.random()*5e5,lastTickDirection:a>0?"up":a<0?"down":"flat"};dt.dispatchTick(t,g);const h=r.baseInterval+Math.random()*r.randomness;un=setTimeout(n,h)}n()}function io(){un&&clearTimeout(un),un=null}function ca(t){At(qt)==="live"&&At(Bt)==="connected"&&J?J.send(JSON.stringify({type:"subscribe",symbols:Array.isArray(t)?t:[t]})):console.warn("Cannot subscribe, live data source not connected.")}function Yh(t){const e=Array.isArray(t)?t:[t];At(qt)==="live"&&At(Bt)==="connected"&&J&&J.send(JSON.stringify({type:"unsubscribe",symbols:e})),e.forEach(n=>{dt.removeSymbol(n),Te.update(i=>(i.delete(n),i)),Rn.update(i=>(delete i[n],i))})}function Gh(t){t.results&&t.results.forEach(e=>{e.status==="error"&&console.error(`Subscription error for ${e.symbol}: ${e.message}`)})}qt.subscribe(t=>{dt.clear(),Te.set(new Set),Rn.set({}),t==="simulated"?(Li(),jr()):(io(),no())});function Kh(t){let e,n;return{c(){e=p("div"),n=p("canvas"),f(e,"class","visualization-container svelte-1p7k1j2"),gi(e,"width",t[0].visualizationsContentWidth+"px"),gi(e,"height",t[0].meterHeight+"px")},m(i,r){P(i,e,r),c(e,n),t[10](n)},p(i,[r]){r&1&&gi(e,"width",i[0].visualizationsContentWidth+"px"),r&1&&gi(e,"height",i[0].meterHeight+"px")},i:tt,o:tt,d(i){i&&C(e),t[10](null)}}}function Jh(t,e,n){let i,r,o;Pe(t,Rn,_=>n(9,o=_));let{symbol:s}=e,{config:l={}}=e,{state:a={}}=e,{marketProfile:u={}}=e,{flashEffect:g=null}=e,h,d,m=null;va(()=>{g&&g.id!==m&&(m=g.id,l.showFlash&&g.magnitude>=l.flashThreshold&&y(g.direction),l.showOrbFlash&&g.magnitude>=l.orbFlashThreshold&&W(g.direction))}),Ms(()=>{h&&(n(6,d=h.getContext("2d")),n(1,h.width=(l==null?void 0:l.visualizationsContentWidth)||220,h),n(1,h.height=(l==null?void 0:l.meterHeight)||120,h))});function v(){if(!d||!h||!a||!l||!i)return;if(h.width!==l.visualizationsContentWidth&&n(1,h.width=l.visualizationsContentWidth,h),h.height!==l.meterHeight&&n(1,h.height=l.meterHeight,h),d.clearRect(0,0,h.width,h.height),n(6,d.fillStyle="#0a0a0a",d),d.fillRect(0,0,h.width,h.height),!a.currentPrice||a.currentPrice===0||a.currentPrice<i.prevDayLow||a.currentPrice>i.prevDayHigh){n(6,d.fillStyle="#6b7280",d),n(6,d.textAlign="center",d),n(6,d.textBaseline="middle",d),n(6,d.font='14px "Roboto Mono", monospace',d),d.fillText("Waiting for live price...",h.width/2,h.height/2);return}const _=l.centralAxisXPosition;l.showVolatilityOrb&&z(d),l.showMarketProfile&&D(d,_),A(d,_),I(d),M(d,_),E(d,_),l.showMaxMarker&&(n(6,d.strokeStyle="#333",d),n(6,d.lineWidth=1,d),d.strokeRect(0,0,h.width,h.height))}function y(_){let w=Math.min(l.flashIntensity,1);const S=()=>{v();const T=d.createRadialGradient(h.width/2,h.height/2,0,h.width/2,h.height/2,h.width),H=_==="up"?"59, 130, 246":"239, 68, 68";T.addColorStop(0,`rgba(${H}, ${w*.5})`),T.addColorStop(1,`rgba(${H}, 0)`),n(6,d.fillStyle=T,d),d.fillRect(0,0,h.width,h.height),w-=.04,w>0&&requestAnimationFrame(S)};requestAnimationFrame(S)}function z(_,w=null){const S=h.width/2,T=h.height/2,H=a.volatility||0,L=l.volatilityOrbInvertBrightness?Math.min(H,4):Math.min(H,2);let U,q,V,$;if(w)[U,q,V]=w.color.split(",").map(Number),$=w.opacity;else{switch(l.volatilityColorMode){case"directional":[U,q,V]=a.lastTickDirection==="up"?[96,165,250]:[239,68,68];break;case"singleHue":[U,q,V]=[167,139,250];break;default:U=75+72*(L/2),q=85+112*(L/2),V=99+154*(L/2);break}$=l.volatilityOrbInvertBrightness?Math.min(1,.2+L*.2):.5+L*.25}const j=l.volatilityOrbBaseWidth/2,G=l.volatilitySizeMultiplier||.5;let et=j*(1+Math.min(H*G,2));l.volatilityOrbInvertBrightness&&(et=j);const it=_.createRadialGradient(S,T,0,S,T,et),Y=`${Math.round(U)}, ${Math.round(q)}, ${Math.round(V)}`;if(l.volatilityOrbInvertBrightness){const kt=Math.max(.05,.8-L*.1875);it.addColorStop(0,`rgba(${Y}, 0)`),it.addColorStop(kt,`rgba(${Y}, 0)`),it.addColorStop(1,`rgba(${Y}, ${$})`)}else it.addColorStop(0,`rgba(${Y}, ${$*.3})`),it.addColorStop(.8,`rgba(${Y}, ${$*1})`),it.addColorStop(1,`rgba(${Y}, 0)`);_.fillStyle=it,_.beginPath(),_.arc(S,T,et,0,2*Math.PI),_.fill()}function W(_){let w=l.orbFlashIntensity;const S=_==="up"?"96,165,250":"248,113,113",T=()=>{v(),z(d,{color:S,opacity:w}),w-=.05,w>0&&requestAnimationFrame(T)};requestAnimationFrame(T)}function I(_){if(!i)return;const w=i.prevDayHigh-i.prevDayLow;if(w<=0||!l.adrProximityThreshold)return;const S=l.adrProximityThreshold/100*w,T=Math.abs(i.prevDayHigh-a.currentPrice)<S,H=Math.abs(i.prevDayLow-a.currentPrice)<S;if(T||H){const L=r(T?i.prevDayHigh:i.prevDayLow),U=_.createLinearGradient(0,L,h.width,L);U.addColorStop(0,"rgba(96, 165, 250, 0)"),U.addColorStop(.5,"rgba(96, 165, 250, 0.7)"),U.addColorStop(1,"rgba(96, 165, 250, 0)"),_.strokeStyle=U,_.lineWidth=2,_.shadowColor="#60a5fa",_.shadowBlur=10,_.beginPath(),_.moveTo(0,L),_.lineTo(h.width,L),_.stroke(),_.shadowBlur=0}}function D(_,w){var q;if(!((q=u==null?void 0:u.levels)!=null&&q.length))return;const S=Math.max(...u.levels.map(V=>V.volume));if(S<=0)return;const H=(h.width/2-10)/S,L=u.levels.map(V=>({y:r(V.price),buyWidth:(V.buy||0)*H,sellWidth:(V.sell||0)*H})),U=V=>{const $=Ah().y(G=>G.y).x0(w).x1(G=>V==="buy"?w+G.buyWidth:w-G.sellWidth).curve(Rh).context(_);_.beginPath(),$(L);const j=V==="buy"?"59, 130, 246":"239, 68, 68";l.marketProfileView==="outline"?(_.fillStyle=`rgba(${j}, 0.2)`,_.fill(),_.strokeStyle=`rgb(${j})`,_.lineWidth=1.5,_.stroke()):(_.fillStyle=`rgba(${j}, 0.5)`,L.forEach(G=>{const et=V==="buy"?G.buyWidth:G.sellWidth;if(et>0){const it=V==="buy"?w:w-et;_.fillRect(it,G.y-.5,et,1)}}))};l.showSingleSidedProfile?l.singleSidedProfileSide==="right"?U("buy"):U("sell"):(U("buy"),U("sell"))}function A(_,w){if(!i)return;const S=r(i.prevDayLow),T=r(i.prevDayHigh);_.strokeStyle="#444",_.lineWidth=2,_.beginPath(),_.moveTo(w,0),_.lineTo(w,h.height),_.stroke(),_.strokeStyle="#3b82f6",_.beginPath(),_.moveTo(w-10,S),_.lineTo(w+10,S),_.stroke(),_.beginPath(),_.moveTo(w-10,T),_.lineTo(w+10,T),_.stroke()}function M(_,w){const S=r(a.currentPrice),T=l.priceFloatHeight,H=l.priceFloatWidth,L=l.priceFloatXOffset,U=x();_.shadowColor=U,_.shadowBlur=10,_.fillStyle=U,_.fillRect(w-H/2+L,S-T/2,H,T),_.shadowBlur=0}function E(_,w){if(typeof a.currentPrice!="number"||isNaN(a.currentPrice)||a.currentPrice===0)return;const S=r(a.currentPrice),T=a.currentPrice.toFixed(5),[H,L]=T.split(".");if(!L)return;const U=`${H}.${L.substring(0,2)}`,q=L.substring(2,4),V=L.substring(4,5),$=l.priceFontSize,j=l.priceFontWeight;_.font=`${j} ${$*l.bigFigureFontSizeRatio}px "Roboto Mono", monospace`;const G=_.measureText(U).width;let et=$*l.bigFigureFontSizeRatio;_.font=`${j} ${$*l.pipFontSizeRatio}px "Roboto Mono", monospace`;const it=_.measureText(q).width;et=Math.max(et,$*l.pipFontSizeRatio);let Y=0;l.showPipetteDigit&&(_.font=`${j} ${$*l.pipetteFontSizeRatio}px "Roboto Mono", monospace`,Y=_.measureText(V).width,et=Math.max(et,$*l.pipetteFontSizeRatio));const kt=G+it+Y,_e=w+l.priceHorizontalOffset-kt;if(l.showPriceBackground||l.showPriceBoundingBox){const pt=l.priceDisplayPadding,me=_e-pt,$t=S-et/2-pt,jt=kt+pt*2,Kt=et+pt*2;l.showPriceBackground&&(_.fillStyle="rgba(10, 10, 10, 0.75)",_.fillRect(me,$t,jt,Kt)),l.showPriceBoundingBox&&(_.strokeStyle="#64748b",_.lineWidth=1,_.strokeRect(me,$t,jt,Kt))}_.textAlign="left",_.textBaseline="middle",_.fillStyle=x();let ot=_e;_.font=`${j} ${$*l.bigFigureFontSizeRatio}px "Roboto Mono", monospace`,_.fillText(U,ot,S),ot+=G,_.font=`${j} ${$*l.pipFontSizeRatio}px "Roboto Mono", monospace`,_.fillText(q,ot,S),ot+=it,l.showPipetteDigit&&(_.font=`${j} ${$*l.pipetteFontSizeRatio}px "Roboto Mono", monospace`,_.fillText(V,ot,S))}function x(){return l.priceUseStaticColor?l.priceStaticColor:a.lastTickDirection==="up"?l.priceUpColor:a.lastTickDirection==="down"?l.priceDownColor:"#d1d5db"}function B(_){zr[_?"unshift":"push"](()=>{h=_,n(1,h)})}return t.$$set=_=>{"symbol"in _&&n(2,s=_.symbol),"config"in _&&n(0,l=_.config),"state"in _&&n(3,a=_.state),"marketProfile"in _&&n(4,u=_.marketProfile),"flashEffect"in _&&n(5,g=_.flashEffect)},t.$$.update=()=>{t.$$.dirty&516&&n(8,i=o[s]),t.$$.dirty&267&&n(7,r=(()=>{if(i&&typeof a.currentPrice=="number"&&a.currentPrice>0){const w=Math.abs(i.prevDayHigh-i.prevDayLow)*.1,S=Math.min(i.prevDayLow,a.currentPrice)-w,T=Math.max(i.prevDayHigh,a.currentPrice)+w;return $r().domain([S,T]).range([(h==null?void 0:h.height)||l.meterHeight,0])}return $r().domain([0,1]).range([l.meterHeight,0])})()),t.$$.dirty&456&&d&&a&&r&&i&&v()},[l,h,s,a,u,g,d,r,i,o,B]}class Zh extends Ii{constructor(e){super(),Bi(this,e,Jh,Kh,Fn,{symbol:2,config:0,state:3,marketProfile:4,flashEffect:5})}}function is(t,e,n){const i=t.slice();return i[10]=e[n],i}function rs(t,e,n){const i=t.slice();return i[13]=e[n],i}function Qh(t){let e,n,i;return{c(){e=p("button"),e.textContent="Disconnect",f(e,"class","action-button disconnect svelte-1jflrxt")},m(r,o){P(r,e,o),n||(i=k(e,"click",t[5]),n=!0)},p:tt,d(r){r&&C(e),n=!1,i()}}}function td(t){let e;return{c(){e=p("button"),e.textContent="Connecting...",f(e,"class","action-button svelte-1jflrxt"),e.disabled=!0},m(n,i){P(n,e,i)},p:tt,d(n){n&&C(e)}}}function ed(t){let e,n,i;return{c(){e=p("button"),e.textContent="Connect",f(e,"class","action-button connect svelte-1jflrxt")},m(r,o){P(r,e,o),n||(i=k(e,"click",t[4]),n=!0)},p:tt,d(r){r&&C(e),n=!1,i()}}}function os(t){let e,n,i,r,o,s,l,a,u,g,h,d,m,v,y,z,W=[],I=new Map,D,A,M=on(t[2]),E=[];for(let w=0;w<M.length;w+=1)E[w]=ls(rs(t,M,w));let x=on(t[3]);const B=w=>w[10];for(let w=0;w<x.length;w+=1){let S=is(t,x,w),T=B(S);I.set(T,W[w]=as(T,S))}let _=null;return x.length||(_=ss()),{c(){e=p("div"),n=p("label"),n.textContent="Subscribe to Symbol",i=b(),r=p("div"),o=p("input"),s=b(),l=p("datalist");for(let w=0;w<E.length;w+=1)E[w].c();a=b(),u=p("button"),g=O("Subscribe"),d=b(),m=p("div"),v=p("h4"),v.textContent="Active Subscriptions:",y=b(),z=p("ul");for(let w=0;w<W.length;w+=1)W[w].c();_&&_.c(),f(n,"for","symbolInput"),f(n,"class","svelte-1jflrxt"),f(o,"list","availableSymbols"),f(o,"id","symbolInput"),f(o,"name","symbolInput"),f(o,"placeholder","e.g., EURUSD"),f(o,"class","svelte-1jflrxt"),f(l,"id","availableSymbols"),u.disabled=h=!t[0],f(u,"class","svelte-1jflrxt"),f(r,"class","subscription-input svelte-1jflrxt"),f(z,"class","svelte-1jflrxt"),f(m,"class","subscriptions-list svelte-1jflrxt"),f(e,"class","control-group svelte-1jflrxt")},m(w,S){P(w,e,S),c(e,n),c(e,i),c(e,r),c(r,o),R(o,t[0]),c(r,s),c(r,l);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(l,null);c(r,a),c(r,u),c(u,g),c(e,d),c(e,m),c(m,v),c(m,y),c(m,z);for(let T=0;T<W.length;T+=1)W[T]&&W[T].m(z,null);_&&_.m(z,null),D||(A=[k(o,"input",t[8]),k(u,"click",t[6])],D=!0)},p(w,S){if(S&1&&o.value!==w[0]&&R(o,w[0]),S&4){M=on(w[2]);let T;for(T=0;T<M.length;T+=1){const H=rs(w,M,T);E[T]?E[T].p(H,S):(E[T]=ls(H),E[T].c(),E[T].m(l,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=M.length}S&1&&h!==(h=!w[0])&&(u.disabled=h),S&136&&(x=on(w[3]),W=Ps(W,S,B,1,w,x,I,z,Ma,as,null,is),!x.length&&_?_.p(w,S):x.length?_&&(_.d(1),_=null):(_=ss(),_.c(),_.m(z,null)))},d(w){w&&C(e),ga(E,w);for(let S=0;S<W.length;S+=1)W[S].d();_&&_.d(),D=!1,rt(A)}}}function ls(t){let e,n=t[13]+"",i,r;return{c(){e=p("option"),i=O(n),e.__value=r=t[13],R(e,e.__value)},m(o,s){P(o,e,s),c(e,i)},p(o,s){s&4&&n!==(n=o[13]+"")&&X(i,n),s&4&&r!==(r=o[13])&&(e.__value=r,R(e,e.__value))},d(o){o&&C(e)}}}function ss(t){let e;return{c(){e=p("li"),e.textContent="None",f(e,"class","svelte-1jflrxt")},m(n,i){P(n,e,i)},p:tt,d(n){n&&C(e)}}}function as(t,e){let n,i=e[10]+"",r,o,s,l,a,u;function g(){return e[9](e[10])}return{key:t,first:null,c(){n=p("li"),r=O(i),o=b(),s=p("button"),s.textContent="x",l=b(),f(s,"class","unsubscribe-btn svelte-1jflrxt"),f(n,"class","svelte-1jflrxt"),this.first=n},m(h,d){P(h,n,d),c(n,r),c(n,o),c(n,s),c(n,l),a||(u=k(s,"click",g),a=!0)},p(h,d){e=h,d&8&&i!==(i=e[10]+"")&&X(r,i)},d(h){h&&C(n),a=!1,u()}}}function nd(t){let e,n,i,r,o,s,l,a,u,g;function h(y,z){if(y[1]==="disconnected"||y[1]==="error")return ed;if(y[1]==="ws-connecting"||y[1]==="ws-open"||y[1]==="ctrader-connecting")return td;if(y[1]==="connected")return Qh}let d=h(t),m=d&&d(t),v=t[1]==="connected"&&os(t);return{c(){e=p("div"),n=p("div"),i=p("h2"),i.textContent="Live Connection",r=b(),o=p("div"),s=O(t[1]),a=b(),u=p("div"),m&&m.c(),g=b(),v&&v.c(),f(i,"class","group-title svelte-1jflrxt"),f(o,"class",l="connection-status status-"+t[1]+" svelte-1jflrxt"),f(n,"class","title-bar svelte-1jflrxt"),f(u,"class","control-group svelte-1jflrxt"),f(e,"class","control-group-container svelte-1jflrxt")},m(y,z){P(y,e,z),c(e,n),c(n,i),c(n,r),c(n,o),c(o,s),c(e,a),c(e,u),m&&m.m(u,null),c(e,g),v&&v.m(e,null)},p(y,[z]){z&2&&X(s,y[1]),z&2&&l!==(l="connection-status status-"+y[1]+" svelte-1jflrxt")&&f(o,"class",l),d===(d=h(y))&&m?m.p(y,z):(m&&m.d(1),m=d&&d(y),m&&(m.c(),m.m(u,null))),y[1]==="connected"?v?v.p(y,z):(v=os(y),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:tt,o:tt,d(y){y&&C(e),m&&m.d(),v&&v.d()}}}function id(t,e,n){let i,r,o;Pe(t,Bt,m=>n(1,i=m)),Pe(t,An,m=>n(2,r=m)),Pe(t,Te,m=>n(3,o=m));let s="EURUSD";function l(){no()}function a(){Li()}function u(){s&&i==="connected"?(ca([s.toUpperCase()]),n(0,s="")):i!=="connected"&&console.warn("Cannot subscribe, live data source not connected. Current status:",i)}function g(m){i==="connected"?Yh([m]):console.warn("Cannot unsubscribe, live data source not connected. Current status:",i)}function h(){s=this.value,n(0,s)}return[s,i,r,o,l,a,u,g,h,m=>g(m)]}class rd extends Ii{constructor(e){super(),Bi(this,e,id,nd,Fn,{})}}function us(t){let e,n,i,r,o,s,l,a,u,g,h,d,m;return{c(){e=p("div"),n=p("h2"),n.textContent="Simulation Settings",i=b(),r=p("div"),o=p("label"),o.textContent="Market Activity",s=b(),l=p("select"),a=p("option"),a.textContent="Calm",u=p("option"),u.textContent="Normal",g=p("option"),g.textContent="Active",h=p("option"),h.textContent="Volatile",f(n,"class","group-title svelte-1nt8jz"),f(o,"for","frequencyMode"),f(o,"class","svelte-1nt8jz"),a.__value="calm",R(a,a.__value),u.__value="normal",R(u,u.__value),g.__value="active",R(g,g.__value),h.__value="volatile",R(h,h.__value),f(l,"id","frequencyMode"),t[0].frequencyMode===void 0&&Xt(()=>t[8].call(l)),f(r,"class","control-group svelte-1nt8jz"),f(e,"class","control-group-container svelte-1nt8jz")},m(v,y){P(v,e,y),c(e,n),c(e,i),c(e,r),c(r,o),c(r,s),c(r,l),c(l,a),c(l,u),c(l,g),c(l,h),wt(l,t[0].frequencyMode,!0),d||(m=[k(l,"change",t[8]),k(l,"change",t[3])],d=!0)},p(v,y){y[0]&1&&wt(l,v[0].frequencyMode)},d(v){v&&C(e),d=!1,rt(m)}}}function cs(t){let e,n;return e=new rd({}),{c(){qr(e.$$.fragment)},m(i,r){Oi(e,i,r),n=!0},i(i){n||(Nt(e.$$.fragment,i),n=!0)},o(i){Vt(e.$$.fragment,i),n=!1},d(i){Wi(e,i)}}}function fs(t){var Ml,Cl,Pl,zl;let e,n,i,r,o,s,l,a,u,g,h,d,m,v,y=t[0].visualizationsContentWidth+"",z,W,I,D,A,M,E,x,B,_=t[0].meterHeight+"",w,S,T,H,L,U,q,V,$,j=t[0].centralAxisXPosition+"",G,et,it,Y,kt,_e,ot,pt,me,$t,jt=t[0].adrProximityThreshold+"",Kt,Dn,En,Z,Ui,On,Vi,St,Wn,oo,Q,Ne,Ae,lo,Bn,In=t[0].priceFontSize+"",qi,so,ao,Mt,uo,Re,De,co,Xi,$n=t[0].priceFontWeight+"",Yi,fo,_t,ho,Ee,Oe,po,jn,Hn=t[0].priceHorizontalOffset+"",Gi,go,_o,Ct,mo,We,Be,vo,Ln,Un=t[0].priceDisplayPadding+"",Ki,yo,bo,Pt,wo,Ie,$e,ko,Vn,qn=((Ml=t[0].bigFigureFontSizeRatio)==null?void 0:Ml.toFixed(1))+"",Ji,So,Mo,mt,Co,je,He,Po,Xn,Yn=((Cl=t[0].pipFontSizeRatio)==null?void 0:Cl.toFixed(1))+"",Zi,zo,Fo,vt,xo,Le,Ue,To,Gn,Kn=((Pl=t[0].pipetteFontSizeRatio)==null?void 0:Pl.toFixed(1))+"",Qi,No,Ao,yt,Ro,Ve,dn,Do,Et,Jn,Eo,qe,pn,Oo,Ot,Zn,Wo,ve,Jt,tr,Bo,Zt,Io,Qn,$o,jo,Qt,te,er,Ho,ee,Lo,ti,Uo,ne,nr,Vo,ie,qo,ei,Xo,re,ir,Yo,oe,Go,ni,rr,ii,or,ye,ri,Ko,le,Xe,Ye,Jo,lr,oi=t[0].priceFloatWidth+"",sr,Zo,zt,Qo,Ge,Ke,tl,ar,li=((zl=t[0].priceFloatHeight)==null?void 0:zl.toFixed(1))+"",ur,el,bt,nl,Je,Ze,il,cr,si=t[0].priceFloatXOffset+"",fr,rl,Ft,hr,ai,dr,be,ui,ol,Qe,Ht,ci,ll,se,pr,sl,ae,al,gn,ul,cl,lt,fi,fl,ue,gr,hl,ce,dl,_n,pl,_r,fe,mr,gl,he,_l,mn,ml,vr,hi,yr,we,di,vl,Lt,pi,yl,de,br,bl,pe,wl,vn,kl,wr,Sl,st=t[0].priceUseStaticColor&&hs(t),at=t[0].showVolatilityOrb&&ds(t),ut=t[0].showFlash&&ps(t),ct=t[0].showOrbFlash&&gs(t),ft=t[0].showMarketProfile&&_s(t);return{c(){e=p("hr"),n=b(),i=p("div"),r=p("h2"),r.textContent="Visual Settings",o=b(),s=p("button"),s.textContent="Reset to Defaults",l=b(),a=p("div"),u=p("h3"),u.textContent="Layout & Meter",g=b(),h=p("div"),d=p("label"),m=O("Visualization Width: "),v=p("span"),z=O(y),W=O("px"),I=b(),D=p("input"),A=b(),M=p("div"),E=p("label"),x=O("Visualization Height: "),B=p("span"),w=O(_),S=O("px"),T=b(),H=p("input"),L=b(),U=p("div"),q=p("label"),V=O("Central Axis Position: "),$=p("span"),G=O(j),et=O("px"),it=b(),Y=p("input"),_e=b(),ot=p("div"),pt=p("label"),me=O("ADR Proximity Pulse Threshold: "),$t=p("span"),Kt=O(jt),Dn=O("%"),En=b(),Z=p("input"),Ui=b(),On=p("hr"),Vi=b(),St=p("div"),Wn=p("h3"),Wn.textContent="Price Representation",oo=b(),Q=p("div"),Ne=p("div"),Ae=p("label"),lo=O("Base Font Size: "),Bn=p("span"),qi=O(In),so=O("px"),ao=b(),Mt=p("input"),uo=b(),Re=p("div"),De=p("label"),co=O("Font Weight: "),Xi=p("span"),Yi=O($n),fo=b(),_t=p("input"),ho=b(),Ee=p("div"),Oe=p("label"),po=O("H-Offset: "),jn=p("span"),Gi=O(Hn),go=O("px"),_o=b(),Ct=p("input"),mo=b(),We=p("div"),Be=p("label"),vo=O("Padding: "),Ln=p("span"),Ki=O(Un),yo=O("px"),bo=b(),Pt=p("input"),wo=b(),Ie=p("div"),$e=p("label"),ko=O("Big Fig Ratio: "),Vn=p("span"),Ji=O(qn),So=O("x"),Mo=b(),mt=p("input"),Co=b(),je=p("div"),He=p("label"),Po=O("Pip Ratio: "),Xn=p("span"),Zi=O(Yn),zo=O("x"),Fo=b(),vt=p("input"),xo=b(),Le=p("div"),Ue=p("label"),To=O("Pipette Ratio: "),Gn=p("span"),Qi=O(Kn),No=O("x"),Ao=b(),yt=p("input"),Ro=b(),Ve=p("div"),dn=p("label"),dn.textContent="Up Color",Do=b(),Et=p("input"),Eo=b(),qe=p("div"),pn=p("label"),pn.textContent="Down Color",Oo=b(),Ot=p("input"),Wo=b(),ve=p("div"),Jt=p("div"),tr=p("span"),tr.textContent="Use Static Color",Bo=b(),Zt=p("input"),Io=b(),Qn=p("label"),Qn.textContent="Toggle Static Color",$o=b(),st&&st.c(),jo=b(),Qt=p("div"),te=p("div"),er=p("span"),er.textContent="Show B-Box",Ho=b(),ee=p("input"),Lo=b(),ti=p("label"),ti.textContent="Toggle B-Box",Uo=b(),ne=p("div"),nr=p("span"),nr.textContent="Show BG",Vo=b(),ie=p("input"),qo=b(),ei=p("label"),ei.textContent="Toggle BG",Xo=b(),re=p("div"),ir=p("span"),ir.textContent="Show Pipette",Yo=b(),oe=p("input"),Go=b(),ni=p("label"),ni.textContent="Toggle Pipette",rr=b(),ii=p("hr"),or=b(),ye=p("div"),ri=p("h3"),ri.textContent="Price Float Element",Ko=b(),le=p("div"),Xe=p("div"),Ye=p("label"),Jo=O("Width: "),lr=p("span"),sr=O(oi),Zo=b(),zt=p("input"),Qo=b(),Ge=p("div"),Ke=p("label"),tl=O("Height: "),ar=p("span"),ur=O(li),el=b(),bt=p("input"),nl=b(),Je=p("div"),Ze=p("label"),il=O("X Offset: "),cr=p("span"),fr=O(si),rl=b(),Ft=p("input"),hr=b(),ai=p("hr"),dr=b(),be=p("div"),ui=p("h3"),ui.textContent="Dynamic Feedback",ol=b(),Qe=p("div"),Ht=p("div"),ci=p("h4"),ci.textContent="Volatility Orb",ll=b(),se=p("div"),pr=p("span"),pr.textContent="Show Orb",sl=b(),ae=p("input"),al=b(),gn=p("label"),gn.textContent="Toggle Orb",ul=b(),at&&at.c(),cl=b(),lt=p("div"),fi=p("h4"),fi.textContent="Flash Effects",fl=b(),ue=p("div"),gr=p("span"),gr.textContent="Price Flash",hl=b(),ce=p("input"),dl=b(),_n=p("label"),_n.textContent="Toggle Price Flash",pl=b(),ut&&ut.c(),_r=b(),fe=p("div"),mr=p("span"),mr.textContent="Orb Flash",gl=b(),he=p("input"),_l=b(),mn=p("label"),mn.textContent="Toggle Orb Flash",ml=b(),ct&&ct.c(),vr=b(),hi=p("hr"),yr=b(),we=p("div"),di=p("h3"),di.textContent="Contextual Layers",vl=b(),Lt=p("div"),pi=p("h4"),pi.textContent="Market Profile",yl=b(),de=p("div"),br=p("span"),br.textContent="Show Profile",bl=b(),pe=p("input"),wl=b(),vn=p("label"),vn.textContent="Toggle Profile",kl=b(),ft&&ft.c(),f(e,"class","svelte-1nt8jz"),f(r,"class","group-title svelte-1nt8jz"),f(s,"class","reset-button svelte-1nt8jz"),f(i,"class","title-bar svelte-1nt8jz"),f(u,"class","group-title svelte-1nt8jz"),f(d,"for","visualizationsContentWidth"),f(d,"class","svelte-1nt8jz"),f(D,"type","range"),f(D,"id","visualizationsContentWidth"),f(D,"min","100"),f(D,"max","500"),f(h,"class","control-group svelte-1nt8jz"),f(E,"for","meterHeight"),f(E,"class","svelte-1nt8jz"),f(H,"type","range"),f(H,"id","meterHeight"),f(H,"min","50"),f(H,"max","300"),f(M,"class","control-group svelte-1nt8jz"),f(q,"for","centralAxisXPosition"),f(q,"class","svelte-1nt8jz"),f(Y,"type","range"),f(Y,"id","centralAxisXPosition"),f(Y,"min","0"),f(Y,"max",kt=t[0].visualizationsContentWidth),f(U,"class","control-group svelte-1nt8jz"),f(pt,"for","adrProximityThreshold"),f(pt,"class","svelte-1nt8jz"),f(Z,"type","range"),f(Z,"id","adrProximityThreshold"),f(Z,"min","0"),f(Z,"max","50"),f(ot,"class","control-group svelte-1nt8jz"),f(a,"class","control-group-container svelte-1nt8jz"),f(On,"class","svelte-1nt8jz"),f(Wn,"class","group-title svelte-1nt8jz"),f(Ae,"for","priceFontSize"),f(Ae,"class","svelte-1nt8jz"),f(Mt,"type","range"),f(Mt,"id","priceFontSize"),f(Mt,"min","10"),f(Mt,"max","100"),f(Ne,"class","control-group svelte-1nt8jz"),f(De,"for","priceFontWeight"),f(De,"class","svelte-1nt8jz"),f(_t,"type","range"),f(_t,"id","priceFontWeight"),f(_t,"min","100"),f(_t,"max","900"),f(_t,"step","100"),f(Re,"class","control-group svelte-1nt8jz"),f(Oe,"for","priceHorizontalOffset"),f(Oe,"class","svelte-1nt8jz"),f(Ct,"type","range"),f(Ct,"id","priceHorizontalOffset"),f(Ct,"min","-100"),f(Ct,"max","100"),f(Ee,"class","control-group svelte-1nt8jz"),f(Be,"for","priceDisplayPadding"),f(Be,"class","svelte-1nt8jz"),f(Pt,"type","range"),f(Pt,"id","priceDisplayPadding"),f(Pt,"min","0"),f(Pt,"max","20"),f(We,"class","control-group svelte-1nt8jz"),f($e,"for","bigFigureFontSizeRatio"),f($e,"class","svelte-1nt8jz"),f(mt,"type","range"),f(mt,"id","bigFigureFontSizeRatio"),f(mt,"min","0.5"),f(mt,"max","2"),f(mt,"step","0.1"),f(Ie,"class","control-group svelte-1nt8jz"),f(He,"for","pipFontSizeRatio"),f(He,"class","svelte-1nt8jz"),f(vt,"type","range"),f(vt,"id","pipFontSizeRatio"),f(vt,"min","0.5"),f(vt,"max","2"),f(vt,"step","0.1"),f(je,"class","control-group svelte-1nt8jz"),f(Ue,"for","pipetteFontSizeRatio"),f(Ue,"class","svelte-1nt8jz"),f(yt,"type","range"),f(yt,"id","pipetteFontSizeRatio"),f(yt,"min","0.5"),f(yt,"max","2"),f(yt,"step","0.1"),f(Le,"class","control-group svelte-1nt8jz"),f(dn,"for","priceUpColor"),f(dn,"class","svelte-1nt8jz"),f(Et,"type","color"),f(Et,"id","priceUpColor"),Et.disabled=Jn=t[0].priceUseStaticColor,f(Ve,"class","control-group colors svelte-1nt8jz"),f(pn,"for","priceDownColor"),f(pn,"class","svelte-1nt8jz"),f(Ot,"type","color"),f(Ot,"id","priceDownColor"),Ot.disabled=Zn=t[0].priceUseStaticColor,f(qe,"class","control-group colors svelte-1nt8jz"),f(Q,"class","control-grid"),f(Zt,"type","checkbox"),f(Zt,"id","priceUseStaticColor"),f(Qn,"for","priceUseStaticColor"),f(Jt,"class","toggle-switch"),f(ve,"class","toggle-group"),f(ee,"type","checkbox"),f(ee,"id","showPriceBoundingBox"),f(ti,"for","showPriceBoundingBox"),f(te,"class","toggle-switch"),f(ie,"type","checkbox"),f(ie,"id","showPriceBackground"),f(ei,"for","showPriceBackground"),f(ne,"class","toggle-switch"),f(oe,"type","checkbox"),f(oe,"id","showPipetteDigit"),f(ni,"for","showPipetteDigit"),f(re,"class","toggle-switch"),f(Qt,"class","toggle-group"),f(St,"class","control-group-container svelte-1nt8jz"),f(ii,"class","svelte-1nt8jz"),f(ri,"class","group-title svelte-1nt8jz"),f(Ye,"for","priceFloatWidth"),f(Ye,"class","svelte-1nt8jz"),f(zt,"type","range"),f(zt,"id","priceFloatWidth"),f(zt,"min","1"),f(zt,"max","200"),f(Xe,"class","control-group svelte-1nt8jz"),f(Ke,"for","priceFloatHeight"),f(Ke,"class","svelte-1nt8jz"),f(bt,"type","range"),f(bt,"id","priceFloatHeight"),f(bt,"min","0.1"),f(bt,"max","10"),f(bt,"step","0.1"),f(Ge,"class","control-group svelte-1nt8jz"),f(Ze,"for","priceFloatXOffset"),f(Ze,"class","svelte-1nt8jz"),f(Ft,"type","range"),f(Ft,"id","priceFloatXOffset"),f(Ft,"min","-100"),f(Ft,"max","100"),f(Je,"class","control-group svelte-1nt8jz"),f(le,"class","control-grid"),f(ye,"class","control-group-container svelte-1nt8jz"),f(ai,"class","svelte-1nt8jz"),f(ui,"class","group-title svelte-1nt8jz"),f(ci,"class","nested-title"),f(ae,"type","checkbox"),f(ae,"id","showVolatilityOrb"),f(gn,"for","showVolatilityOrb"),f(gn,"class","svelte-1nt8jz"),f(se,"class","toggle-switch standalone"),f(Ht,"class","control-group nested svelte-1nt8jz"),f(fi,"class","nested-title"),f(ce,"type","checkbox"),f(ce,"id","showFlash"),f(_n,"for","showFlash"),f(_n,"class","svelte-1nt8jz"),f(ue,"class","toggle-switch standalone"),f(he,"type","checkbox"),f(he,"id","showOrbFlash"),f(mn,"for","showOrbFlash"),f(mn,"class","svelte-1nt8jz"),f(fe,"class","toggle-switch standalone"),f(lt,"class","control-group nested svelte-1nt8jz"),f(Qe,"class","control-grid"),f(be,"class","control-group-container svelte-1nt8jz"),f(hi,"class","svelte-1nt8jz"),f(di,"class","group-title svelte-1nt8jz"),f(pi,"class","nested-title"),f(pe,"type","checkbox"),f(pe,"id","showMarketProfile"),f(vn,"for","showMarketProfile"),f(vn,"class","svelte-1nt8jz"),f(de,"class","toggle-switch standalone"),f(Lt,"class","control-group nested svelte-1nt8jz"),f(we,"class","control-group-container svelte-1nt8jz")},m(F,N){P(F,e,N),P(F,n,N),P(F,i,N),c(i,r),c(i,o),c(i,s),P(F,l,N),P(F,a,N),c(a,u),c(a,g),c(a,h),c(h,d),c(d,m),c(d,v),c(v,z),c(v,W),c(h,I),c(h,D),R(D,t[0].visualizationsContentWidth),c(a,A),c(a,M),c(M,E),c(E,x),c(E,B),c(B,w),c(B,S),c(M,T),c(M,H),R(H,t[0].meterHeight),c(a,L),c(a,U),c(U,q),c(q,V),c(q,$),c($,G),c($,et),c(U,it),c(U,Y),R(Y,t[0].centralAxisXPosition),c(a,_e),c(a,ot),c(ot,pt),c(pt,me),c(pt,$t),c($t,Kt),c($t,Dn),c(ot,En),c(ot,Z),R(Z,t[0].adrProximityThreshold),P(F,Ui,N),P(F,On,N),P(F,Vi,N),P(F,St,N),c(St,Wn),c(St,oo),c(St,Q),c(Q,Ne),c(Ne,Ae),c(Ae,lo),c(Ae,Bn),c(Bn,qi),c(Bn,so),c(Ne,ao),c(Ne,Mt),R(Mt,t[0].priceFontSize),c(Q,uo),c(Q,Re),c(Re,De),c(De,co),c(De,Xi),c(Xi,Yi),c(Re,fo),c(Re,_t),R(_t,t[0].priceFontWeight),c(Q,ho),c(Q,Ee),c(Ee,Oe),c(Oe,po),c(Oe,jn),c(jn,Gi),c(jn,go),c(Ee,_o),c(Ee,Ct),R(Ct,t[0].priceHorizontalOffset),c(Q,mo),c(Q,We),c(We,Be),c(Be,vo),c(Be,Ln),c(Ln,Ki),c(Ln,yo),c(We,bo),c(We,Pt),R(Pt,t[0].priceDisplayPadding),c(Q,wo),c(Q,Ie),c(Ie,$e),c($e,ko),c($e,Vn),c(Vn,Ji),c(Vn,So),c(Ie,Mo),c(Ie,mt),R(mt,t[0].bigFigureFontSizeRatio),c(Q,Co),c(Q,je),c(je,He),c(He,Po),c(He,Xn),c(Xn,Zi),c(Xn,zo),c(je,Fo),c(je,vt),R(vt,t[0].pipFontSizeRatio),c(Q,xo),c(Q,Le),c(Le,Ue),c(Ue,To),c(Ue,Gn),c(Gn,Qi),c(Gn,No),c(Le,Ao),c(Le,yt),R(yt,t[0].pipetteFontSizeRatio),c(Q,Ro),c(Q,Ve),c(Ve,dn),c(Ve,Do),c(Ve,Et),R(Et,t[0].priceUpColor),c(Q,Eo),c(Q,qe),c(qe,pn),c(qe,Oo),c(qe,Ot),R(Ot,t[0].priceDownColor),c(St,Wo),c(St,ve),c(ve,Jt),c(Jt,tr),c(Jt,Bo),c(Jt,Zt),Zt.checked=t[0].priceUseStaticColor,c(Jt,Io),c(Jt,Qn),c(ve,$o),st&&st.m(ve,null),c(St,jo),c(St,Qt),c(Qt,te),c(te,er),c(te,Ho),c(te,ee),ee.checked=t[0].showPriceBoundingBox,c(te,Lo),c(te,ti),c(Qt,Uo),c(Qt,ne),c(ne,nr),c(ne,Vo),c(ne,ie),ie.checked=t[0].showPriceBackground,c(ne,qo),c(ne,ei),c(Qt,Xo),c(Qt,re),c(re,ir),c(re,Yo),c(re,oe),oe.checked=t[0].showPipetteDigit,c(re,Go),c(re,ni),P(F,rr,N),P(F,ii,N),P(F,or,N),P(F,ye,N),c(ye,ri),c(ye,Ko),c(ye,le),c(le,Xe),c(Xe,Ye),c(Ye,Jo),c(Ye,lr),c(lr,sr),c(Xe,Zo),c(Xe,zt),R(zt,t[0].priceFloatWidth),c(le,Qo),c(le,Ge),c(Ge,Ke),c(Ke,tl),c(Ke,ar),c(ar,ur),c(Ge,el),c(Ge,bt),R(bt,t[0].priceFloatHeight),c(le,nl),c(le,Je),c(Je,Ze),c(Ze,il),c(Ze,cr),c(cr,fr),c(Je,rl),c(Je,Ft),R(Ft,t[0].priceFloatXOffset),P(F,hr,N),P(F,ai,N),P(F,dr,N),P(F,be,N),c(be,ui),c(be,ol),c(be,Qe),c(Qe,Ht),c(Ht,ci),c(Ht,ll),c(Ht,se),c(se,pr),c(se,sl),c(se,ae),ae.checked=t[0].showVolatilityOrb,c(se,al),c(se,gn),c(Ht,ul),at&&at.m(Ht,null),c(Qe,cl),c(Qe,lt),c(lt,fi),c(lt,fl),c(lt,ue),c(ue,gr),c(ue,hl),c(ue,ce),ce.checked=t[0].showFlash,c(ue,dl),c(ue,_n),c(lt,pl),ut&&ut.m(lt,null),c(lt,_r),c(lt,fe),c(fe,mr),c(fe,gl),c(fe,he),he.checked=t[0].showOrbFlash,c(fe,_l),c(fe,mn),c(lt,ml),ct&&ct.m(lt,null),P(F,vr,N),P(F,hi,N),P(F,yr,N),P(F,we,N),c(we,di),c(we,vl),c(we,Lt),c(Lt,pi),c(Lt,yl),c(Lt,de),c(de,br),c(de,bl),c(de,pe),pe.checked=t[0].showMarketProfile,c(de,wl),c(de,vn),c(Lt,kl),ft&&ft.m(Lt,null),wr||(Sl=[k(s,"click",t[4]),k(D,"change",t[9]),k(D,"input",t[9]),k(D,"input",t[3]),k(H,"change",t[10]),k(H,"input",t[10]),k(H,"input",t[3]),k(Y,"change",t[11]),k(Y,"input",t[11]),k(Y,"input",t[3]),k(Z,"change",t[12]),k(Z,"input",t[12]),k(Z,"input",t[3]),k(Mt,"change",t[13]),k(Mt,"input",t[13]),k(Mt,"input",t[3]),k(_t,"change",t[14]),k(_t,"input",t[14]),k(_t,"input",t[3]),k(Ct,"change",t[15]),k(Ct,"input",t[15]),k(Ct,"input",t[3]),k(Pt,"change",t[16]),k(Pt,"input",t[16]),k(Pt,"input",t[3]),k(mt,"change",t[17]),k(mt,"input",t[17]),k(mt,"input",t[3]),k(vt,"change",t[18]),k(vt,"input",t[18]),k(vt,"input",t[3]),k(yt,"change",t[19]),k(yt,"input",t[19]),k(yt,"input",t[3]),k(Et,"input",t[20]),k(Et,"input",t[3]),k(Ot,"input",t[21]),k(Ot,"input",t[3]),k(Zt,"change",t[22]),k(Zt,"change",t[3]),k(ee,"change",t[24]),k(ee,"change",t[3]),k(ie,"change",t[25]),k(ie,"change",t[3]),k(oe,"change",t[26]),k(oe,"change",t[3]),k(zt,"change",t[27]),k(zt,"input",t[27]),k(zt,"input",t[3]),k(bt,"change",t[28]),k(bt,"input",t[28]),k(bt,"input",t[3]),k(Ft,"change",t[29]),k(Ft,"input",t[29]),k(Ft,"input",t[3]),k(ae,"change",t[30]),k(ae,"change",t[3]),k(ce,"change",t[35]),k(ce,"change",t[3]),k(he,"change",t[38]),k(he,"change",t[3]),k(pe,"change",t[41]),k(pe,"change",t[3])],wr=!0)},p(F,N){var Fl,xl,Tl,Nl;N[0]&1&&y!==(y=F[0].visualizationsContentWidth+"")&&X(z,y),N[0]&1&&R(D,F[0].visualizationsContentWidth),N[0]&1&&_!==(_=F[0].meterHeight+"")&&X(w,_),N[0]&1&&R(H,F[0].meterHeight),N[0]&1&&j!==(j=F[0].centralAxisXPosition+"")&&X(G,j),N[0]&1&&kt!==(kt=F[0].visualizationsContentWidth)&&f(Y,"max",kt),N[0]&1&&R(Y,F[0].centralAxisXPosition),N[0]&1&&jt!==(jt=F[0].adrProximityThreshold+"")&&X(Kt,jt),N[0]&1&&R(Z,F[0].adrProximityThreshold),N[0]&1&&In!==(In=F[0].priceFontSize+"")&&X(qi,In),N[0]&1&&R(Mt,F[0].priceFontSize),N[0]&1&&$n!==($n=F[0].priceFontWeight+"")&&X(Yi,$n),N[0]&1&&R(_t,F[0].priceFontWeight),N[0]&1&&Hn!==(Hn=F[0].priceHorizontalOffset+"")&&X(Gi,Hn),N[0]&1&&R(Ct,F[0].priceHorizontalOffset),N[0]&1&&Un!==(Un=F[0].priceDisplayPadding+"")&&X(Ki,Un),N[0]&1&&R(Pt,F[0].priceDisplayPadding),N[0]&1&&qn!==(qn=((Fl=F[0].bigFigureFontSizeRatio)==null?void 0:Fl.toFixed(1))+"")&&X(Ji,qn),N[0]&1&&R(mt,F[0].bigFigureFontSizeRatio),N[0]&1&&Yn!==(Yn=((xl=F[0].pipFontSizeRatio)==null?void 0:xl.toFixed(1))+"")&&X(Zi,Yn),N[0]&1&&R(vt,F[0].pipFontSizeRatio),N[0]&1&&Kn!==(Kn=((Tl=F[0].pipetteFontSizeRatio)==null?void 0:Tl.toFixed(1))+"")&&X(Qi,Kn),N[0]&1&&R(yt,F[0].pipetteFontSizeRatio),N[0]&1&&Jn!==(Jn=F[0].priceUseStaticColor)&&(Et.disabled=Jn),N[0]&1&&R(Et,F[0].priceUpColor),N[0]&1&&Zn!==(Zn=F[0].priceUseStaticColor)&&(Ot.disabled=Zn),N[0]&1&&R(Ot,F[0].priceDownColor),N[0]&1&&(Zt.checked=F[0].priceUseStaticColor),F[0].priceUseStaticColor?st?st.p(F,N):(st=hs(F),st.c(),st.m(ve,null)):st&&(st.d(1),st=null),N[0]&1&&(ee.checked=F[0].showPriceBoundingBox),N[0]&1&&(ie.checked=F[0].showPriceBackground),N[0]&1&&(oe.checked=F[0].showPipetteDigit),N[0]&1&&oi!==(oi=F[0].priceFloatWidth+"")&&X(sr,oi),N[0]&1&&R(zt,F[0].priceFloatWidth),N[0]&1&&li!==(li=((Nl=F[0].priceFloatHeight)==null?void 0:Nl.toFixed(1))+"")&&X(ur,li),N[0]&1&&R(bt,F[0].priceFloatHeight),N[0]&1&&si!==(si=F[0].priceFloatXOffset+"")&&X(fr,si),N[0]&1&&R(Ft,F[0].priceFloatXOffset),N[0]&1&&(ae.checked=F[0].showVolatilityOrb),F[0].showVolatilityOrb?at?at.p(F,N):(at=ds(F),at.c(),at.m(Ht,null)):at&&(at.d(1),at=null),N[0]&1&&(ce.checked=F[0].showFlash),F[0].showFlash?ut?ut.p(F,N):(ut=ps(F),ut.c(),ut.m(lt,_r)):ut&&(ut.d(1),ut=null),N[0]&1&&(he.checked=F[0].showOrbFlash),F[0].showOrbFlash?ct?ct.p(F,N):(ct=gs(F),ct.c(),ct.m(lt,null)):ct&&(ct.d(1),ct=null),N[0]&1&&(pe.checked=F[0].showMarketProfile),F[0].showMarketProfile?ft?ft.p(F,N):(ft=_s(F),ft.c(),ft.m(Lt,null)):ft&&(ft.d(1),ft=null)},d(F){F&&(C(e),C(n),C(i),C(l),C(a),C(Ui),C(On),C(Vi),C(St),C(rr),C(ii),C(or),C(ye),C(hr),C(ai),C(dr),C(be),C(vr),C(hi),C(yr),C(we)),st&&st.d(),at&&at.d(),ut&&ut.d(),ct&&ct.d(),ft&&ft.d(),wr=!1,rt(Sl)}}}function hs(t){let e,n,i,r,o,s;return{c(){e=p("div"),n=p("label"),n.textContent="Static Color",i=b(),r=p("input"),f(n,"for","priceStaticColor"),f(n,"class","svelte-1nt8jz"),f(r,"type","color"),f(r,"id","priceStaticColor"),f(e,"class","control-group colors svelte-1nt8jz")},m(l,a){P(l,e,a),c(e,n),c(e,i),c(e,r),R(r,t[0].priceStaticColor),o||(s=[k(r,"input",t[23]),k(r,"input",t[3])],o=!0)},p(l,a){a[0]&1&&R(r,l[0].priceStaticColor)},d(l){l&&C(e),o=!1,rt(s)}}}function ds(t){var V;let e,n,i,r,o,s,l,a,u,g,h=t[0].volatilityOrbBaseWidth+"",d,m,v,y,z,W,I,D=((V=t[0].volatilitySizeMultiplier)==null?void 0:V.toFixed(1))+"",A,M,E,x,B,_,w,S,T,H,L,U,q;return{c(){e=p("label"),e.textContent="Color Mode",n=b(),i=p("select"),r=p("option"),r.textContent="Intensity",o=p("option"),o.textContent="Directional",s=p("option"),s.textContent="Single Hue",l=b(),a=p("label"),u=O("Base Width: "),g=p("span"),d=O(h),m=b(),v=p("input"),y=b(),z=p("label"),W=O("Size Multiplier: "),I=p("span"),A=O(D),M=O("x"),E=b(),x=p("input"),B=b(),_=p("div"),w=p("span"),w.textContent="Invert Brightness",S=b(),T=p("input"),H=b(),L=p("label"),L.textContent="Toggle Invert",f(e,"for","volatilityColorMode"),f(e,"class","svelte-1nt8jz"),r.__value="intensity",R(r,r.__value),o.__value="directional",R(o,o.__value),s.__value="singleHue",R(s,s.__value),f(i,"id","volatilityColorMode"),t[0].volatilityColorMode===void 0&&Xt(()=>t[31].call(i)),f(a,"for","volatilityOrbBaseWidth"),f(a,"class","svelte-1nt8jz"),f(v,"type","range"),f(v,"id","volatilityOrbBaseWidth"),f(v,"min","10"),f(v,"max","200"),f(z,"for","volatilitySizeMultiplier"),f(z,"class","svelte-1nt8jz"),f(x,"type","range"),f(x,"min","0.1"),f(x,"max","3"),f(x,"step","0.1"),f(T,"type","checkbox"),f(T,"id","volatilityOrbInvertBrightness"),f(L,"for","volatilityOrbInvertBrightness"),f(L,"class","svelte-1nt8jz"),f(_,"class","toggle-switch")},m($,j){P($,e,j),P($,n,j),P($,i,j),c(i,r),c(i,o),c(i,s),wt(i,t[0].volatilityColorMode,!0),P($,l,j),P($,a,j),c(a,u),c(a,g),c(g,d),P($,m,j),P($,v,j),R(v,t[0].volatilityOrbBaseWidth),P($,y,j),P($,z,j),c(z,W),c(z,I),c(I,A),c(I,M),P($,E,j),P($,x,j),R(x,t[0].volatilitySizeMultiplier),P($,B,j),P($,_,j),c(_,w),c(_,S),c(_,T),T.checked=t[0].volatilityOrbInvertBrightness,c(_,H),c(_,L),U||(q=[k(i,"change",t[31]),k(i,"change",t[3]),k(v,"change",t[32]),k(v,"input",t[32]),k(v,"input",t[3]),k(x,"change",t[33]),k(x,"input",t[33]),k(x,"input",t[3]),k(T,"change",t[34]),k(T,"change",t[3])],U=!0)},p($,j){var G;j[0]&1&&wt(i,$[0].volatilityColorMode),j[0]&1&&h!==(h=$[0].volatilityOrbBaseWidth+"")&&X(d,h),j[0]&1&&R(v,$[0].volatilityOrbBaseWidth),j[0]&1&&D!==(D=((G=$[0].volatilitySizeMultiplier)==null?void 0:G.toFixed(1))+"")&&X(A,D),j[0]&1&&R(x,$[0].volatilitySizeMultiplier),j[0]&1&&(T.checked=$[0].volatilityOrbInvertBrightness)},d($){$&&(C(e),C(n),C(i),C(l),C(a),C(m),C(v),C(y),C(z),C(E),C(x),C(B),C(_)),U=!1,rt(q)}}}function ps(t){var I,D;let e,n,i,r=((I=t[0].flashThreshold)==null?void 0:I.toFixed(1))+"",o,s,l,a,u,g,h,d=((D=t[0].flashIntensity)==null?void 0:D.toFixed(1))+"",m,v,y,z,W;return{c(){e=p("label"),n=O("Threshold: "),i=p("span"),o=O(r),s=b(),l=p("input"),a=b(),u=p("label"),g=O("Intensity: "),h=p("span"),m=O(d),v=b(),y=p("input"),f(e,"class","svelte-1nt8jz"),f(l,"type","range"),f(l,"min","0"),f(l,"max","5"),f(l,"step","0.1"),f(u,"class","svelte-1nt8jz"),f(y,"type","range"),f(y,"min","0.1"),f(y,"max","1"),f(y,"step","0.1")},m(A,M){P(A,e,M),c(e,n),c(e,i),c(i,o),P(A,s,M),P(A,l,M),R(l,t[0].flashThreshold),P(A,a,M),P(A,u,M),c(u,g),c(u,h),c(h,m),P(A,v,M),P(A,y,M),R(y,t[0].flashIntensity),z||(W=[k(l,"change",t[36]),k(l,"input",t[36]),k(l,"input",t[3]),k(y,"change",t[37]),k(y,"input",t[37]),k(y,"input",t[3])],z=!0)},p(A,M){var E,x;M[0]&1&&r!==(r=((E=A[0].flashThreshold)==null?void 0:E.toFixed(1))+"")&&X(o,r),M[0]&1&&R(l,A[0].flashThreshold),M[0]&1&&d!==(d=((x=A[0].flashIntensity)==null?void 0:x.toFixed(1))+"")&&X(m,d),M[0]&1&&R(y,A[0].flashIntensity)},d(A){A&&(C(e),C(s),C(l),C(a),C(u),C(v),C(y)),z=!1,rt(W)}}}function gs(t){var I,D;let e,n,i,r=((I=t[0].orbFlashThreshold)==null?void 0:I.toFixed(1))+"",o,s,l,a,u,g,h,d=((D=t[0].orbFlashIntensity)==null?void 0:D.toFixed(1))+"",m,v,y,z,W;return{c(){e=p("label"),n=O("Threshold: "),i=p("span"),o=O(r),s=b(),l=p("input"),a=b(),u=p("label"),g=O("Intensity: "),h=p("span"),m=O(d),v=b(),y=p("input"),f(e,"class","svelte-1nt8jz"),f(l,"type","range"),f(l,"min","0"),f(l,"max","5"),f(l,"step","0.1"),f(u,"class","svelte-1nt8jz"),f(y,"type","range"),f(y,"min","0.1"),f(y,"max","1"),f(y,"step","0.1")},m(A,M){P(A,e,M),c(e,n),c(e,i),c(i,o),P(A,s,M),P(A,l,M),R(l,t[0].orbFlashThreshold),P(A,a,M),P(A,u,M),c(u,g),c(u,h),c(h,m),P(A,v,M),P(A,y,M),R(y,t[0].orbFlashIntensity),z||(W=[k(l,"change",t[39]),k(l,"input",t[39]),k(l,"input",t[3]),k(y,"change",t[40]),k(y,"input",t[40]),k(y,"input",t[3])],z=!0)},p(A,M){var E,x;M[0]&1&&r!==(r=((E=A[0].orbFlashThreshold)==null?void 0:E.toFixed(1))+"")&&X(o,r),M[0]&1&&R(l,A[0].orbFlashThreshold),M[0]&1&&d!==(d=((x=A[0].orbFlashIntensity)==null?void 0:x.toFixed(1))+"")&&X(m,d),M[0]&1&&R(y,A[0].orbFlashIntensity)},d(A){A&&(C(e),C(s),C(l),C(a),C(u),C(v),C(y)),z=!1,rt(W)}}}function _s(t){let e,n,i,r,o,s,l,a,u,g,h,d,m,v,y,z,W,I,D,A,M,E,x,B=t[0].distributionDepthMode==="recent"&&ms(t),_=t[0].showSingleSidedProfile&&vs(t);return{c(){e=p("label"),e.textContent="View Mode",n=b(),i=p("select"),r=p("option"),r.textContent="Bars",o=p("option"),o.textContent="Outline",s=b(),l=p("label"),l.textContent="Data Depth",a=b(),u=p("select"),g=p("option"),g.textContent="All Ticks",h=p("option"),h.textContent="Recent Ticks",d=b(),B&&B.c(),m=b(),v=p("div"),y=p("span"),y.textContent="Single-Sided",z=b(),W=p("input"),I=b(),D=p("label"),D.textContent="Toggle Single-Sided",A=b(),_&&_.c(),M=Hr(),f(e,"for","marketProfileView"),f(e,"class","svelte-1nt8jz"),r.__value="bars",R(r,r.__value),o.__value="outline",R(o,o.__value),f(i,"id","marketProfileView"),t[0].marketProfileView===void 0&&Xt(()=>t[42].call(i)),f(l,"for","distributionDepthMode"),f(l,"class","svelte-1nt8jz"),g.__value="all",R(g,g.__value),h.__value="recent",R(h,h.__value),f(u,"id","distributionDepthMode"),t[0].distributionDepthMode===void 0&&Xt(()=>t[43].call(u)),f(W,"type","checkbox"),f(W,"id","showSingleSidedProfile"),f(D,"for","showSingleSidedProfile"),f(D,"class","svelte-1nt8jz"),f(v,"class","toggle-switch")},m(w,S){P(w,e,S),P(w,n,S),P(w,i,S),c(i,r),c(i,o),wt(i,t[0].marketProfileView,!0),P(w,s,S),P(w,l,S),P(w,a,S),P(w,u,S),c(u,g),c(u,h),wt(u,t[0].distributionDepthMode,!0),P(w,d,S),B&&B.m(w,S),P(w,m,S),P(w,v,S),c(v,y),c(v,z),c(v,W),W.checked=t[0].showSingleSidedProfile,c(v,I),c(v,D),P(w,A,S),_&&_.m(w,S),P(w,M,S),E||(x=[k(i,"change",t[42]),k(i,"change",t[3]),k(u,"change",t[43]),k(u,"change",t[3]),k(W,"change",t[45]),k(W,"change",t[3])],E=!0)},p(w,S){S[0]&1&&wt(i,w[0].marketProfileView),S[0]&1&&wt(u,w[0].distributionDepthMode),w[0].distributionDepthMode==="recent"?B?B.p(w,S):(B=ms(w),B.c(),B.m(m.parentNode,m)):B&&(B.d(1),B=null),S[0]&1&&(W.checked=w[0].showSingleSidedProfile),w[0].showSingleSidedProfile?_?_.p(w,S):(_=vs(w),_.c(),_.m(M.parentNode,M)):_&&(_.d(1),_=null)},d(w){w&&(C(e),C(n),C(i),C(s),C(l),C(a),C(u),C(d),C(m),C(v),C(A),C(M)),B&&B.d(w),_&&_.d(w),E=!1,rt(x)}}}function ms(t){let e,n,i,r=t[0].distributionPercentage+"",o,s,l,a,u,g;return{c(){e=p("label"),n=O("Recent Ticks %: "),i=p("span"),o=O(r),s=O("%"),l=b(),a=p("input"),f(e,"class","svelte-1nt8jz"),f(a,"type","range"),f(a,"min","1"),f(a,"max","100")},m(h,d){P(h,e,d),c(e,n),c(e,i),c(i,o),c(i,s),P(h,l,d),P(h,a,d),R(a,t[0].distributionPercentage),u||(g=[k(a,"change",t[44]),k(a,"input",t[44]),k(a,"input",t[3])],u=!0)},p(h,d){d[0]&1&&r!==(r=h[0].distributionPercentage+"")&&X(o,r),d[0]&1&&R(a,h[0].distributionPercentage)},d(h){h&&(C(e),C(l),C(a)),u=!1,rt(g)}}}function vs(t){let e,n,i,r,o,s,l;return{c(){e=p("label"),e.textContent="Side",n=b(),i=p("select"),r=p("option"),r.textContent="Buy",o=p("option"),o.textContent="Sell",f(e,"for","singleSidedProfileSide"),f(e,"class","svelte-1nt8jz"),r.__value="right",R(r,r.__value),o.__value="left",R(o,o.__value),f(i,"id","singleSidedProfileSide"),t[0].singleSidedProfileSide===void 0&&Xt(()=>t[46].call(i))},m(a,u){P(a,e,u),P(a,n,u),P(a,i,u),c(i,r),c(i,o),wt(i,t[0].singleSidedProfileSide,!0),s||(l=[k(i,"change",t[46]),k(i,"change",t[3])],s=!0)},p(a,u){u[0]&1&&wt(i,a[0].singleSidedProfileSide)},d(a){a&&(C(e),C(n),C(i)),s=!1,rt(l)}}}function od(t){let e,n,i,r,o,s,l,a,u,g,h,d,m,v,y,z,W,I,D,A,M=t[1]==="simulated"&&t[0]&&us(t),E=t[1]==="live"&&cs(),x=t[0]&&fs(t);return{c(){e=p("div"),n=p("div"),i=p("div"),i.innerHTML='<h1 class="panel-title svelte-1nt8jz">Adaptive Flow Meter</h1> <p class="panel-description svelte-1nt8jz">Tune the simulation and visual feedback.</p>',r=b(),o=p("div"),s=p("div"),l=p("div"),l.innerHTML='<h2 class="group-title svelte-1nt8jz">System</h2>',a=b(),u=p("div"),g=p("label"),g.textContent="Data Source",h=b(),d=p("select"),m=p("option"),m.textContent="Simulated Data",v=p("option"),v.textContent="Live Data (cTrader)",y=b(),M&&M.c(),z=b(),E&&E.c(),W=b(),x&&x.c(),f(i,"class","panel-header svelte-1nt8jz"),f(l,"class","title-bar svelte-1nt8jz"),f(g,"for","dataSource"),f(g,"class","svelte-1nt8jz"),m.__value="simulated",R(m,m.__value),v.__value="live",R(v,v.__value),f(d,"id","dataSource"),t[1]===void 0&&Xt(()=>t[6].call(d)),f(u,"class","control-group svelte-1nt8jz"),f(s,"class","control-group-container svelte-1nt8jz"),f(o,"class","panel-content svelte-1nt8jz"),f(n,"class","panel svelte-1nt8jz"),f(e,"class","panel-wrapper svelte-1nt8jz")},m(B,_){P(B,e,_),c(e,n),c(n,i),c(n,r),c(n,o),c(o,s),c(s,l),c(s,a),c(s,u),c(u,g),c(u,h),c(u,d),c(d,m),c(d,v),wt(d,t[1],!0),c(o,y),M&&M.m(o,null),c(o,z),E&&E.m(o,null),c(o,W),x&&x.m(o,null),I=!0,D||(A=[k(d,"change",t[6]),k(d,"change",t[7])],D=!0)},p(B,_){_[0]&2&&wt(d,B[1]),B[1]==="simulated"&&B[0]?M?M.p(B,_):(M=us(B),M.c(),M.m(o,z)):M&&(M.d(1),M=null),B[1]==="live"?E?_[0]&2&&Nt(E,1):(E=cs(),E.c(),Nt(E,1),E.m(o,W)):E&&(Ur(),Vt(E,1,1,()=>{E=null}),Vr()),B[0]?x?x.p(B,_):(x=fs(B),x.c(),x.m(o,null)):x&&(x.d(1),x=null)},i(B){I||(Nt(E),I=!0)},o(B){Vt(E),I=!1},d(B){B&&C(e),M&&M.d(),E&&E.d(),x&&x.d(),D=!1,rt(A)}}}function ld(t,e,n){let i;Pe(t,qt,Z=>n(1,i=Z));let{selectedSymbol:r}=e,{config:o}=e;const s=ya();function l(){r&&o&&dt.updateConfig(r,o)}function a(){r&&dt.resetConfig(r)}function u(){i=tn(this),qt.set(i)}const g=Z=>s("dataSourceChange",{mode:Z.target.value});function h(){o.frequencyMode=tn(this),n(0,o)}function d(){o.visualizationsContentWidth=K(this.value),n(0,o)}function m(){o.meterHeight=K(this.value),n(0,o)}function v(){o.centralAxisXPosition=K(this.value),n(0,o)}function y(){o.adrProximityThreshold=K(this.value),n(0,o)}function z(){o.priceFontSize=K(this.value),n(0,o)}function W(){o.priceFontWeight=K(this.value),n(0,o)}function I(){o.priceHorizontalOffset=K(this.value),n(0,o)}function D(){o.priceDisplayPadding=K(this.value),n(0,o)}function A(){o.bigFigureFontSizeRatio=K(this.value),n(0,o)}function M(){o.pipFontSizeRatio=K(this.value),n(0,o)}function E(){o.pipetteFontSizeRatio=K(this.value),n(0,o)}function x(){o.priceUpColor=this.value,n(0,o)}function B(){o.priceDownColor=this.value,n(0,o)}function _(){o.priceUseStaticColor=this.checked,n(0,o)}function w(){o.priceStaticColor=this.value,n(0,o)}function S(){o.showPriceBoundingBox=this.checked,n(0,o)}function T(){o.showPriceBackground=this.checked,n(0,o)}function H(){o.showPipetteDigit=this.checked,n(0,o)}function L(){o.priceFloatWidth=K(this.value),n(0,o)}function U(){o.priceFloatHeight=K(this.value),n(0,o)}function q(){o.priceFloatXOffset=K(this.value),n(0,o)}function V(){o.showVolatilityOrb=this.checked,n(0,o)}function $(){o.volatilityColorMode=tn(this),n(0,o)}function j(){o.volatilityOrbBaseWidth=K(this.value),n(0,o)}function G(){o.volatilitySizeMultiplier=K(this.value),n(0,o)}function et(){o.volatilityOrbInvertBrightness=this.checked,n(0,o)}function it(){o.showFlash=this.checked,n(0,o)}function Y(){o.flashThreshold=K(this.value),n(0,o)}function kt(){o.flashIntensity=K(this.value),n(0,o)}function _e(){o.showOrbFlash=this.checked,n(0,o)}function ot(){o.orbFlashThreshold=K(this.value),n(0,o)}function pt(){o.orbFlashIntensity=K(this.value),n(0,o)}function me(){o.showMarketProfile=this.checked,n(0,o)}function $t(){o.marketProfileView=tn(this),n(0,o)}function jt(){o.distributionDepthMode=tn(this),n(0,o)}function Kt(){o.distributionPercentage=K(this.value),n(0,o)}function Dn(){o.showSingleSidedProfile=this.checked,n(0,o)}function En(){o.singleSidedProfileSide=tn(this),n(0,o)}return t.$$set=Z=>{"selectedSymbol"in Z&&n(5,r=Z.selectedSymbol),"config"in Z&&n(0,o=Z.config)},[o,i,s,l,a,r,u,g,h,d,m,v,y,z,W,I,D,A,M,E,x,B,_,w,S,T,H,L,U,q,V,$,j,G,et,it,Y,kt,_e,ot,pt,me,$t,jt,Kt,Dn,En]}class sd extends Ii{constructor(e){super(),Bi(this,e,ld,od,Fn,{selectedSymbol:5,config:0},null,[-1,-1])}}function ys(t,e,n){const i=t.slice();return i[8]=e[n][0],i[9]=e[n][1],i}function ad(t){let e,n=[],i=new Map,r,o=on(Object.entries(t[0]));const s=l=>l[8];for(let l=0;l<o.length;l+=1){let a=ys(t,o,l),u=s(a);i.set(u,n[l]=bs(u,a))}return{c(){e=p("div");for(let l=0;l<n.length;l+=1)n[l].c();f(e,"class","viz-grid svelte-40a9z5")},m(l,a){P(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,a){a&3&&(o=on(Object.entries(l[0])),Ur(),n=Ps(n,a,s,1,l,o,i,e,Ca,bs,null,ys),Vr())},i(l){if(!r){for(let a=0;a<o.length;a+=1)Nt(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)Vt(n[a]);r=!1},d(l){l&&C(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function ud(t){let e,n,i;function r(l,a){return l[2]==="live"?fd:cd}let o=r(t),s=o(t);return{c(){e=p("div"),n=p("h2"),n.textContent="Welcome to NeuroSense FX",i=b(),s.c(),f(n,"class","svelte-40a9z5"),f(e,"class","placeholder svelte-40a9z5")},m(l,a){P(l,e,a),c(e,n),c(e,i),s.m(e,null)},p(l,a){o===(o=r(l))&&s?s.p(l,a):(s.d(1),s=o(l),s&&(s.c(),s.m(e,null)))},i:tt,o:tt,d(l){l&&C(e),s.d()}}}function bs(t,e){let n,i,r;function o(){return e[7](e[8])}return i=new Zh({props:{symbol:e[8],config:e[9].config,state:e[9].state,marketProfile:e[9].marketProfile,flashEffect:e[9].state.flashEffect}}),i.$on("click",o),{key:t,first:null,c(){n=Hr(),qr(i.$$.fragment),this.first=n},m(s,l){P(s,n,l),Oi(i,s,l),r=!0},p(s,l){e=s;const a={};l&1&&(a.symbol=e[8]),l&1&&(a.config=e[9].config),l&1&&(a.state=e[9].state),l&1&&(a.marketProfile=e[9].marketProfile),l&1&&(a.flashEffect=e[9].state.flashEffect),i.$set(a)},i(s){r||(Nt(i.$$.fragment,s),r=!0)},o(s){Vt(i.$$.fragment,s),r=!1},d(s){s&&C(n),Wi(i,s)}}}function cd(t){let e;return{c(){e=p("p"),e.textContent="Simulation is running. Select SIM-EURUSD in the panel to view and configure.",f(e,"class","svelte-40a9z5")},m(n,i){P(n,e,i)},p:tt,d(n){n&&C(e)}}}function fd(t){let e;function n(o,s){if(o[3]==="disconnected")return gd;if(o[3]==="ws-connecting"||o[3]==="ws-open"||o[3]==="ctrader-connecting")return pd;if(o[3]==="connected")return dd;if(o[3]==="error")return hd}let i=n(t),r=i&&i(t);return{c(){r&&r.c(),e=Hr()},m(o,s){r&&r.m(o,s),P(o,e,s)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&C(e),r&&r.d(o)}}}function hd(t){let e,n,i;return{c(){e=p("p"),n=O("Connection Error. Check console for details. Status: "),i=O(t[3]),f(e,"class","error svelte-40a9z5")},m(r,o){P(r,e,o),c(e,n),c(e,i)},p(r,o){o&8&&X(i,r[3])},d(r){r&&C(e)}}}function dd(t){let e;return{c(){e=p("p"),e.textContent="Connected to live data. Subscribe to a symbol in the panel.",f(e,"class","svelte-40a9z5")},m(n,i){P(n,e,i)},p:tt,d(n){n&&C(e)}}}function pd(t){let e,n,i;return{c(){e=p("p"),n=O("Connecting to live data... Status: "),i=O(t[3]),f(e,"class","svelte-40a9z5")},m(r,o){P(r,e,o),c(e,n),c(e,i)},p(r,o){o&8&&X(i,r[3])},d(r){r&&C(e)}}}function gd(t){let e;return{c(){e=p("p"),e.textContent="Select Live Data and click Connect in the panel.",f(e,"class","svelte-40a9z5")},m(n,i){P(n,e,i)},p:tt,d(n){n&&C(e)}}}function _d(t){var v;let e,n,i,r,o,s,l,a,u,g;const h=[ud,ad],d=[];function m(y,z){return z&1&&(r=null),r==null&&(r=Object.keys(y[0]).length===0),r?0:1}return o=m(t,-1),s=d[o]=h[o](t),u=new sd({props:{selectedSymbol:t[1],config:(v=t[0][t[1]])==null?void 0:v.config}}),u.$on("dataSourceChange",t[4]),u.$on("configChange",t[5]),u.$on("resetConfig",t[6]),{c(){e=p("main"),n=p("div"),i=p("div"),s.c(),l=b(),a=p("div"),qr(u.$$.fragment),f(i,"class","viz-area svelte-40a9z5"),f(a,"class","config-panel-container svelte-40a9z5"),f(n,"class","main-container svelte-40a9z5"),f(e,"class","svelte-40a9z5")},m(y,z){P(y,e,z),c(e,n),c(n,i),d[o].m(i,null),c(n,l),c(n,a),Oi(u,a,null),g=!0},p(y,[z]){var D;let W=o;o=m(y,z),o===W?d[o].p(y,z):(Ur(),Vt(d[W],1,1,()=>{d[W]=null}),Vr(),s=d[o],s?s.p(y,z):(s=d[o]=h[o](y),s.c()),Nt(s,1),s.m(i,null));const I={};z&2&&(I.selectedSymbol=y[1]),z&3&&(I.config=(D=y[0][y[1]])==null?void 0:D.config),u.$set(I)},i(y){g||(Nt(s),Nt(u.$$.fragment,y),g=!0)},o(y){Vt(s),Vt(u.$$.fragment,y),g=!1},d(y){y&&C(e),d[o].d(),Wi(u)}}}function md(t,e,n){let i,r;Pe(t,qt,h=>n(2,i=h)),Pe(t,Bt,h=>n(3,r=h));let o={},s=null;Ms(()=>{const h=dt.subscribe(d=>{n(0,o=d);const m=Object.keys(d);(!s||!d[s])&&n(1,s=m[0]||null)});return At(qt)==="simulated"&&jr(),()=>{h()}});function l(h){const d=h.detail.mode;qt.set(d),n(1,s=null),d==="live"?no():(Li(),jr())}function a(h){const{symbol:d,newConfig:m}=h.detail;dt.updateConfig(d,m)}function u(h){const{symbol:d}=h.detail;dt.resetConfig(d)}return[o,s,i,r,l,a,u,h=>n(1,s=h)]}class vd extends Ii{constructor(e){super(),Bi(this,e,md,_d,Fn,{})}}const yd=ge({adrRange:100,pulseThreshold:.5,pulseScale:5,maxMarkerDecay:10,flashThreshold:2,adrProximityThreshold:10,frequencyMode:"normal",priceBucketSize:.5,showMaxMarker:!0,showVolatilityOrb:!0,volatilityColorMode:"intensity",volatilityOrbBaseWidth:70,volatilityOrbInvertBrightness:!1,showMarketProfile:!0,showFlash:!1,flashIntensity:.3,showOrbFlash:!1,orbFlashThreshold:2,orbFlashIntensity:.8,distributionDepthMode:"all",distributionPercentage:50,marketProfileView:"bars",priceFontSize:50,priceFontWeight:"600",priceHorizontalOffset:14,priceFloatWidth:50,priceFloatHeight:1,priceFloatXOffset:20,bigFigureFontSizeRatio:1.2,pipFontSizeRatio:1.1,pipetteFontSizeRatio:.8,showPriceBoundingBox:!1,showPriceBackground:!1,priceDisplayPadding:4,priceStaticColor:!1,priceUpColor:"#3b82f6",priceDownColor:"#ef4444",visualizationsContentWidth:220,centralAxisXPosition:170,meterHeight:120,centralMeterFixedThickness:8,showPipetteDigit:!1,showSingleSidedProfile:!1,singleSidedProfileSide:"right"}),fa=ge({currentPrice:1.255,midPrice:1.255,lastTickTime:0,maxDeflection:{up:0,down:0,lastUpdateTime:0},volatility:0,lastTickDirection:"up",marketProfile:new Map,adrHigh:1.255+100/2e4,adrLow:1.255-100/2e4});new vd({target:document.getElementById("app"),props:{}});const ro=new Worker(new URL("/assets/dataProcessor-CxWmMfm8.js",import.meta.url));ro.onmessage=t=>{const e=t.data.payload;t.data.type==="stateUpdate"&&fa.set(e)};const Se=At(fa);console.log("Sending initial state to worker:",Se);const bd={currentPrice:Se.currentPrice,midPrice:Se.midPrice,lastTickTime:Se.lastTickTime,maxDeflection:Se.maxDeflection,volatility:Se.volatility,lastTickDirection:Se.lastTickDirection};ro.postMessage({type:"init",payload:{config:At(yd),initialState:bd}});ro.postMessage({type:"startSimulation"});
