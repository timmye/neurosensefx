<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day Range Meter Test Manual Instructions</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a0a1a;
            color: #fff;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
        }
        .step {
            margin: 10px 0;
            padding: 8px;
            background: #2a1a2a;
            border-left: 3px solid #5a9;
        }
        .expected {
            background: #1a3a1a;
            border-left-color: #5a5;
        }
        .evidence {
            background: #3a1a1a;
            border-left-color: #a55;
        }
        code {
            background: #333;
            padding: 2px 6px;
            border-radius: 3px;
        }
        a {
            color: #5af;
        }
    </style>
</head>
<body>
    <h1>üéØ Day Range Meter OHLC Fix Test</h1>

    <div class="section">
        <h2>üîß Fix Being Tested</h2>
        <p><strong>Data Structure Mapping Fix</strong>: Lines 75-83 in <code>lib/visualizers.js</code></p>
        <pre>
const mappedData = {
  todayHigh: d.high,    // Maps from processor output to expected input
  todayLow: d.low,      // Maps from processor output to expected input
  current: d.current,
  adrHigh: d.adrHigh,
  adrLow: d.adrLow
};
        </pre>
        <p><strong>Issue Fixed</strong>: <code>dayRangeElements.js</code> expects <code>data.todayHigh</code> and <code>data.todayLow</code>, but processor was providing different field names.</p>
    </div>

    <div class="section">
        <h2>üß™ Test Steps</h2>

        <div class="step">
            <strong>Step 1: Navigate to Application</strong><br>
            Open: <a href="http://localhost:5175" target="_blank">http://localhost:5175</a>
        </div>

        <div class="step">
            <strong>Step 2: Create Day Range Display</strong><br>
            1. Press <code>Ctrl+K</code> to open symbol selector<br>
            2. Type <code>EUR/USD</code><br>
            3. Press <code>Enter</code> to create display<br>
            4. Wait 3-5 seconds for data to load
        </div>

        <div class="step">
            <strong>Step 3: Switch to Day Range Visualization</strong><br>
            1. Press <code>M</code> to open display menu<br>
            2. Type <code>dayRange</code><br>
            3. Press <code>Enter</code> to select
        </div>

        <div class="step">
            <strong>Step 4: Wait for Rendering</strong><br>
            Wait 5 seconds for the day range meter to render with data
        </div>

        <div class="step expected">
            <strong>‚úÖ Expected Results</strong><br>
            The Day Range Meter should show <strong>ALL 4 MARKERS</strong>:<br>
            ‚Ä¢ <strong>O</strong> (Open) - Center line with label<br>
            ‚Ä¢ <strong>H</strong> (High) - Upper marker with price<br>
            ‚Ä¢ <strong>L</strong> (Low) - Lower marker with price<br>
            ‚Ä¢ <strong>C</strong> (Current) - Current price marker<br>
            <br>
            All markers should display <strong>valid price values</strong> (not undefined or null)
        </div>

        <div class="step evidence">
            <strong>üì∏ Evidence Collection</strong><br>
            1. Take a screenshot of the day range meter showing all 4 markers<br>
            2. Open browser console (<code>F12</code> ‚Üí Console tab)<br>
            3. Look for any console messages related to data mapping<br>
            4. Verify the price values look reasonable for EUR/USD (~1.0-1.2 range)
        </div>

        <div class="step">
            <strong>üîÑ Test Additional Symbols</strong><br>
            Repeat steps 2-4 with:<br>
            ‚Ä¢ <code>GBP/USD</code> (typical range: 1.2-1.4)<br>
            ‚Ä¢ <code>USD/JPY</code> (typical range: 140-160)<br>
            ‚Ä¢ <code>EUR/GBP</code> (typical range: 0.8-0.9)
        </div>
    </div>

    <div class="section">
        <h2>üêõ Troubleshooting</h2>

        <div class="step">
            <strong>If markers are missing:</strong><br>
            1. Check console for JavaScript errors<br>
            2. Verify WebSocket connection (should show live data)<br>
            3. Ensure symbol data is loading correctly
        </div>

        <div class="step">
            <strong>If price values are undefined:</strong><br>
            1. Check console for data mapping errors<br>
            2. Verify the fix in <code>lib/visualizers.js</code> lines 75-83 is present<br>
            3. Check that processor is providing high/low data
        </div>
    </div>

    <div class="section">
        <h2>üìã Test Report</h2>

        <div class="step evidence">
            <strong>Required Evidence:</strong><br>
            ‚úÖ Screenshot showing Day Range Meter with O/H/L/C markers<br>
            ‚úÖ Console logs showing no data mapping errors<br>
            ‚úÖ Verification of reasonable price values<br>
            ‚úÖ Test results for multiple symbols
        </div>
    </div>

    <script>
        console.log('üéØ Day Range Meter Test Manual Instructions Loaded');
        console.log('üì± Navigate to http://localhost:5175 to begin testing');
        console.log('üîß Testing the fix for data structure mapping between displayDataProcessor and dayRangeElements');
    </script>
</body>
</html>