/**
 * Keyboard Accessibility Styles
 *
 * Visual feedback for keyboard interactions to ensure traders can see
 * which elements are focused and actionable during keyboard navigation.
 */

/* Keyboard focus indicators - high contrast for trading environments */
.keyboard-focusable {
  outline: 2px solid #4f46e5;
  outline-offset: 2px;
  border-radius: 2px;
}

.keyboard-focusable:focus {
  outline: 3px solid #4f46e5;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
}

/* Keyboard pressed feedback */
.keyboard-pressed {
  transform: scale(0.98);
  transition: transform 0.1s ease;
}

.keyboard-triggered {
  animation: keyboardPulse 0.3s ease;
}

@keyframes keyboardPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Keyboard dragging styles */
.keyboard-dragging {
  cursor: move !important;
  box-shadow: 0 8px 24px rgba(79, 70, 229, 0.4);
  z-index: 10000 !important;
}

.keyboard-dragging:focus {
  outline: 3px solid #4f46e5;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2), 0 8px 24px rgba(79, 70, 229, 0.4);
}

/* Enhanced focus for trading critical elements */
.floating-display.keyboard-focusable,
.viz-container.keyboard-focusable {
  outline: 3px solid #4f46e5;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.3);
}

.context-menu .keyboard-focusable {
  background: rgba(79, 70, 229, 0.1);
}

.menu-item.keyboard-focusable {
  background: rgba(79, 70, 229, 0.1);
  border-left: 3px solid #4f46e5;
  padding-left: calc(12px - 3px); /* Compensate for border */
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .keyboard-focusable {
    outline: 3px solid currentColor;
    outline-offset: 2px;
  }

  .keyboard-focusable:focus {
    outline: 4px solid currentColor;
    outline-offset: 1px;
  }

  .keyboard-dragging {
    border: 2px solid currentColor;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .keyboard-pressed,
  .keyboard-triggered {
    animation: none;
    transform: none;
    transition: none;
  }
}

/* Skip links for keyboard navigation */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #1f2937;
  color: #e5e7eb;
  border: 2px solid #4f46e5;
  border-radius: 4px;
  padding: 8px;
  text-decoration: none;
  z-index: 10000;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 6px;
}

/* Focus indicators for different element types */
button.keyboard-focusable,
input.keyboard-focusable,
select.keyboard-focusable,
textarea.keyboard-focusable {
  border: 2px solid #4f46e5;
  box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.2);
}

a.keyboard-focusable {
  text-decoration: underline;
  text-decoration-color: #4f46e5;
  text-decoration-thickness: 2px;
}

/* Trading-specific keyboard navigation indicators */
.display-controls .keyboard-focusable {
  background: rgba(79, 70, 229, 0.1);
  border: 1px solid #4f46e5;
}

.symbol-palette .keyboard-focusable {
  background: rgba(79, 70, 229, 0.15);
  border: 1px solid #4f46e5;
  border-radius: 4px;
}

/* Performance optimizations - use transform for animations */
.keyboard-triggered,
.keyboard-pressed,
.keyboard-dragging {
  will-change: transform;
  backface-visibility: hidden;
}

/* Dark theme support */
@media (prefers-color-scheme: dark) {
  .keyboard-focusable {
    outline-color: #6366f1;
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
  }

  .skip-link {
    background: #111827;
    color: #e5e7eb;
    border-color: #6366f1;
  }
}

/* Light theme support */
@media (prefers-color-scheme: light) {
  .keyboard-focusable {
    outline-color: #4f46e5;
    box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
  }

  .skip-link {
    background: #ffffff;
    color: #1f2937;
    border-color: #4f46e5;
  }
}